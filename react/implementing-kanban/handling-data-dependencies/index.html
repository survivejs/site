<html lang="en"><head><title>Handling Data Dependencies</title><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimal-ui"/><meta name="description" content="
So far we have developed an application for keeping track of notes in localStorage. To get closer to Kanban, we need to model the concept of Lane. A Lane is something that should be able to contain many Notes within itself and track their order. One way to model this is simply to make a Lane point â€¦"/><meta name="keywords" content="webpack,react,javascript,programming,web development"/><link rel="icon" type="image/png" href="/assets/img/favicon.png"/><link rel="alternate" type="application/atom+xml" href="/atom.xml"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css"/><link rel="stylesheet" href="/assets/main.css"/></head><body><main role="main"><div class="chapter__wrapper"><div class="header-image" style="background-image:url(/assets/img/chapters/kanban_photo.jpg);"></div><h1 class="post__heading">Handling Data Dependencies</h1><div class="header-extra"><a href="https://www.flickr.com/photos/61745819@N00/10588140955">Radek Orszewski (CC BY-NC-SA)</a></div><div class="toc-nav__wrapper"><h4 class="search-nav--header">Search</h4><input id="search"/><h4 class="toc-nav--header">Table of Contents</h4><ul class="toc-nav"><li class="toc-intro"><a class="toc-nav__link intro" href="/react/introduction">Introduction</a></li><li class="toc-part"><a class="toc-nav__link part" href="/react/getting-started">Getting Started</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/getting-started/introduction-to-react">Introduction to React</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/getting-started/setting-up-the-project">Setting Up the Project</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/getting-started/implementing-notes">Implementing a Note Application</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/getting-started/deleting-notes">Deleting Notes</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/getting-started/understanding-react-components">Understanding React Components</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/getting-started/editing-notes">Editing Notes</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/getting-started/styling-notes">Styling the Notes Application</a></li><li class="toc-part"><a class="toc-nav__link part" href="/react/implementing-kanban">Implementing Kanban</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/implementing-kanban/react-and-flux">React and Flux</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/implementing-kanban/implementing-store-and-actions">Implementing NoteStore and NoteActions</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/implementing-kanban/implementing-persistency">Implementing Persistency over localStorage</a></li><li class="toc-chapter"><span class="toc-nav__link toc-nav__link--current chapter">Handling Data Dependencies</span></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/implementing-kanban/editing-lanes">Editing Lanes</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/implementing-kanban/drag-and-drop">Implementing Drag and Drop</a></li><li class="toc-part"><a class="toc-nav__link part" href="/react/advanced-techniques">Advanced Techniques</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/advanced-techniques/testing-react">Testing React*</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/advanced-techniques/typing-with-react">Typing with React*</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/advanced-techniques/styling-react">Styling React</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/advanced-techniques/structuring-react-projects">Structuring React Projects</a></li><li class="toc-part"><a class="toc-nav__link part" href="/react/appendices">Appendices</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/appendices/language-features">Language Features</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/appendices/understanding-decorators">Understanding Decorators</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/appendices/troubleshooting">Troubleshooting</a></li></ul><div><div class="buy-container"><a href="/react/introduction"><img class="sidebar-cover" src="/assets/img/react_title_page_small.png" width="255" height="329"/></a><p><a class="btn btn--normal btn--buy" href="https://leanpub.com/survivejs-react">Buy at Leanpub</a></p></div><h3>See also</h3><div class="buy-container"><a href="/webpack/foreword"><img class="sidebar-cover" src="/assets/img/webpack_title_page_small.png" width="255" height="329"/></a><p><a class="btn btn--normal btn--buy" href="https://leanpub.com/survivejs-webpack">Buy at Leanpub</a><a class="btn btn--normal btn--buy" href="https://www.amazon.com/dp/9526868803/">Buy at Amazon</a><a class="btn btn--normal btn--buy" href="https://www.amazon.com/dp/B06XWZZGBS">Buy for Kindle</a><a class="btn btn--normal btn--buy" href="https://survivejs.typeform.com/to/LUQK0T">Buy Signed LE</a></p></div></div></div><div class="chapter"><div class="post__content"><blockquote class="latestpost tip"><div>From the blog:</div><a class="latestpost-link" href="/blog/euro-tour-2017-recap">SurviveJS Euro Tour 2017 Recap</a></blockquote><div class="post__meta"><a class="post__end_source" href="https://github.com/survivejs/react/tree/master/project_source/implementing_kanban/04_handling_data_dependencies" target="_blank">Finished source code</a><a class="post__demo" href="/demos/implementing-kanban/handling-data-dependencies" target="_blank">Demo</a></div><div class="chapter-content"><p>So far we have developed an application for keeping track of notes in <code>localStorage</code>. To get closer to Kanban, we need to model the concept of <code>Lane</code>. A <code>Lane</code> is something that should be able to contain many <code>Notes</code> within itself and track their order. One way to model this is simply to make a <code>Lane</code> point at <code>Notes</code> through an array of <code>Note</code> ids.</p>
<p>This relation could be reversed. A <code>Note</code> could point at a <code>Lane</code> using an id and maintain information about its position within a <code>Lane</code>. In this case, we are going to stick with the former design as that works well with re-ordering later on.</p>
<h2 class="header"><a class="header-anchor" href="#defining-lanes-" id="defining-lanes-"></a><span class="text">Defining <code>Lanes</code></span><a class="header-anchor-select" href="#defining-lanes-">#</a></h2>
<p>As earlier, we can use the same idea of two components here. There will be a component for the higher level (i.e., <code>Lanes</code>) and for the lower level (i.e., <code>Lane</code>). The higher level component will deal with lane ordering. A <code>Lane</code> will render itself (i.e., name and <code>Notes</code>) and have basic manipulation operations.</p>
<p>Just as with <code>Notes</code>, we are going to need a set of actions. For now it is enough if we can just create new lanes so we can create a corresponding action for that as below:</p>
<p><strong>app/actions/LaneActions.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >import</span> alt <span class="token keyword" >from</span> <span class="token string" >'../libs/alt'</span><span class="token punctuation" >;</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> alt<span class="token punctuation" >.</span><span class="token function" >generateActions</span><span class="token punctuation" >(</span><span class="token string" >'create'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
</code></pre>
<p>In addition, we are going to need a <code>LaneStore</code> and a method matching to <code>create</code>. The idea is pretty much the same as for <code>NoteStore</code> earlier. <code>create</code> will concatenate a new lane to the list of lanes. After that, the change will propagate to the listeners (i.e., <code>FinalStore</code> and components).</p>
<p><strong>app/stores/LaneStore.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >import</span> LaneActions <span class="token keyword" >from</span> <span class="token string" >'../actions/LaneActions'</span><span class="token punctuation" >;</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token keyword" >class</span> <span class="token class-name" >LaneStore</span> <span class="token punctuation" >{</span>
  <span class="token function" >constructor</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >this</span><span class="token punctuation" >.</span><span class="token function" >bindActions</span><span class="token punctuation" >(</span>LaneActions<span class="token punctuation" >)</span><span class="token punctuation" >;</span>

    <span class="token keyword" >this</span><span class="token punctuation" >.</span>lanes <span class="token operator" >=</span> <span class="token punctuation" >[</span><span class="token punctuation" >]</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>
  <span class="token function" >create</span><span class="token punctuation" >(</span>lane<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token comment" spellcheck="true">// If `notes` aren't provided for some reason,</span>
    <span class="token comment" spellcheck="true">// default to an empty array.</span>
    lane<span class="token punctuation" >.</span>notes <span class="token operator" >=</span> lane<span class="token punctuation" >.</span>notes <span class="token operator" >||</span> <span class="token punctuation" >[</span><span class="token punctuation" >]</span><span class="token punctuation" >;</span>

    <span class="token keyword" >this</span><span class="token punctuation" >.</span><span class="token function" >setState</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
      lanes<span class="token punctuation" >:</span> <span class="token keyword" >this</span><span class="token punctuation" >.</span>lanes<span class="token punctuation" >.</span><span class="token function" >concat</span><span class="token punctuation" >(</span>lane<span class="token punctuation" >)</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>
<span class="token punctuation" >}</span>
</code></pre>
<p>To connect <code>LaneStore</code> with our application, we need to connect it to it through <code>setup</code>:</p>
<p><strong>app/components/Provider/setup.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >import</span> storage <span class="token keyword" >from</span> <span class="token string" >'../../libs/storage'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> persist <span class="token keyword" >from</span> <span class="token string" >'../../libs/persist'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> NoteStore <span class="token keyword" >from</span> <span class="token string" >'../../stores/NoteStore'</span><span class="token punctuation" >;</span>
<div class="leanpub-insert">
<span class="token keyword" >import</span> LaneStore <span class="token keyword" >from</span> <span class="token string" >'../../stores/LaneStore'</span><span class="token punctuation" >;</span>
</div>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> alt <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
  alt<span class="token punctuation" >.</span><span class="token function" >addStore</span><span class="token punctuation" >(</span><span class="token string" >'NoteStore'</span><span class="token punctuation" >,</span> NoteStore<span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<div class="leanpub-insert">
  alt<span class="token punctuation" >.</span><span class="token function" >addStore</span><span class="token punctuation" >(</span><span class="token string" >'LaneStore'</span><span class="token punctuation" >,</span> LaneStore<span class="token punctuation" >)</span><span class="token punctuation" >;</span>
</div>

  <span class="token function" >persist</span><span class="token punctuation" >(</span>alt<span class="token punctuation" >,</span> <span class="token function" >storage</span><span class="token punctuation" >(</span>localStorage<span class="token punctuation" >)</span><span class="token punctuation" >,</span> <span class="token string" >'app'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span>
</code></pre>
<p>We are also going to need a <code>Lanes</code> container to display our lanes:</p>
<p><strong>app/components/Lanes.jsx</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >import</span> React <span class="token keyword" >from</span> <span class="token string" >'react'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> Lane <span class="token keyword" >from</span> <span class="token string" >'./Lane'</span><span class="token punctuation" >;</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token punctuation" >(</span><span class="token punctuation" >{</span>lanes<span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >(</span>
  <span class="token operator" >&lt;</span>div className<span class="token operator" >=</span><span class="token string" >"lanes"</span><span class="token operator" >></span><span class="token punctuation" >{</span>lanes<span class="token punctuation" >.</span><span class="token function" >map</span><span class="token punctuation" >(</span>lane <span class="token operator" >=</span><span class="token operator" >></span>
    <span class="token operator" >&lt;</span>Lane className<span class="token operator" >=</span><span class="token string" >"lane"</span> key<span class="token operator" >=</span><span class="token punctuation" >{</span>lane<span class="token punctuation" >.</span>id<span class="token punctuation" >}</span> lane<span class="token operator" >=</span><span class="token punctuation" >{</span>lane<span class="token punctuation" >}</span> <span class="token operator" >/</span><span class="token operator" >></span>
  <span class="token punctuation" >)</span><span class="token punctuation" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
<span class="token punctuation" >)</span>
</code></pre>
<p>And finally we can add a little stub for <code>Lane</code> to make sure our application doesn&#39;t crash when we connect <code>Lanes</code> with it. A lot of the current <code>App</code> logic will move here eventually:</p>
<p><strong>app/components/Lane.jsx</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >import</span> React <span class="token keyword" >from</span> <span class="token string" >'react'</span><span class="token punctuation" >;</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token punctuation" >(</span><span class="token punctuation" >{</span>lane<span class="token punctuation" >,</span> <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>props<span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >(</span>
  <span class="token operator" >&lt;</span>div <span class="token punctuation" >{</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>props<span class="token punctuation" >}</span><span class="token operator" >></span><span class="token punctuation" >{</span>lane<span class="token punctuation" >.</span>name<span class="token punctuation" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
<span class="token punctuation" >)</span>
</code></pre>
<h2 class="header"><a class="header-anchor" href="#connecting-lanes-with-app-" id="connecting-lanes-with-app-"></a><span class="text">Connecting <code>Lanes</code> with <code>App</code></span><a class="header-anchor-select" href="#connecting-lanes-with-app-">#</a></h2>
<p>Next, we need to make room for <code>Lanes</code> at <code>App</code>. We will simply replace <code>Notes</code> references with <code>Lanes</code>, set up lane actions, and store. This means a lot of the old code can disappear. Replace <code>App</code> with the following code:</p>
<p><strong>app/components/App.jsx</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >import</span> React <span class="token keyword" >from</span> <span class="token string" >'react'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> uuid <span class="token keyword" >from</span> <span class="token string" >'uuid'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> connect <span class="token keyword" >from</span> <span class="token string" >'../libs/connect'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> Lanes <span class="token keyword" >from</span> <span class="token string" >'./Lanes'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> LaneActions <span class="token keyword" >from</span> <span class="token string" >'../actions/LaneActions'</span><span class="token punctuation" >;</span>

<span class="token keyword" >const</span> App <span class="token operator" >=</span> <span class="token punctuation" >(</span><span class="token punctuation" >{</span>LaneActions<span class="token punctuation" >,</span> lanes<span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
  <span class="token keyword" >const</span> addLane <span class="token operator" >=</span> <span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
    LaneActions<span class="token punctuation" >.</span><span class="token function" >create</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
      id<span class="token punctuation" >:</span> uuid<span class="token punctuation" >.</span><span class="token function" >v4</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
      name<span class="token punctuation" >:</span> <span class="token string" >'New lane'</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >;</span>

  <span class="token keyword" >return</span> <span class="token punctuation" >(</span>
    <span class="token operator" >&lt;</span>div<span class="token operator" >></span>
      <span class="token operator" >&lt;</span>button className<span class="token operator" >=</span><span class="token string" >"add-lane"</span> onClick<span class="token operator" >=</span><span class="token punctuation" >{</span>addLane<span class="token punctuation" >}</span><span class="token operator" >></span><span class="token operator" >+</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>button<span class="token operator" >></span>
      <span class="token operator" >&lt;</span>Lanes lanes<span class="token operator" >=</span><span class="token punctuation" >{</span>lanes<span class="token punctuation" >}</span> <span class="token operator" >/</span><span class="token operator" >></span>
    <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
  <span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span><span class="token punctuation" >;</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token function" >connect</span><span class="token punctuation" >(</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>lanes<span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >(</span><span class="token punctuation" >{</span>
  lanes
<span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span> <span class="token punctuation" >{</span>
  LaneActions
<span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >(</span>App<span class="token punctuation" >)</span>
</code></pre>
<p>If you check out the implementation at the browser, you can see that the current implementation doesn&#39;t do much. You should be able to add new lanes to the Kanban and see &quot;New lane&quot; text per each but that&#39;s about it. To restore the note related functionality, we need to focus on modeling <code>Lane</code> further.</p>
<h2 class="header"><a class="header-anchor" href="#modeling-lane-" id="modeling-lane-"></a><span class="text">Modeling <code>Lane</code></span><a class="header-anchor-select" href="#modeling-lane-">#</a></h2>
<p><code>Lane</code> will render a name and associated <code>Notes</code>. The example below has been modeled largely after our earlier implementation of <code>App</code>. Replace the file contents entirely as follows:</p>
<p><strong>app/components/Lane.jsx</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >import</span> React <span class="token keyword" >from</span> <span class="token string" >'react'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> uuid <span class="token keyword" >from</span> <span class="token string" >'uuid'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> connect <span class="token keyword" >from</span> <span class="token string" >'../libs/connect'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> NoteActions <span class="token keyword" >from</span> <span class="token string" >'../actions/NoteActions'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> Notes <span class="token keyword" >from</span> <span class="token string" >'./Notes'</span><span class="token punctuation" >;</span>

<span class="token keyword" >const</span> Lane <span class="token operator" >=</span> <span class="token punctuation" >(</span><span class="token punctuation" >{</span>
  lane<span class="token punctuation" >,</span> notes<span class="token punctuation" >,</span> NoteActions<span class="token punctuation" >,</span> <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>props
<span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
  <span class="token keyword" >const</span> editNote <span class="token operator" >=</span> <span class="token punctuation" >(</span>id<span class="token punctuation" >,</span> task<span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
    NoteActions<span class="token punctuation" >.</span><span class="token function" >update</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>id<span class="token punctuation" >,</span> task<span class="token punctuation" >,</span> editing<span class="token punctuation" >:</span> <span class="token boolean" >false</span><span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >;</span>
  <span class="token keyword" >const</span> addNote <span class="token operator" >=</span> e <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
    e<span class="token punctuation" >.</span><span class="token function" >stopPropagation</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

    <span class="token keyword" >const</span> noteId <span class="token operator" >=</span> uuid<span class="token punctuation" >.</span><span class="token function" >v4</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

    NoteActions<span class="token punctuation" >.</span><span class="token function" >create</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
      id<span class="token punctuation" >:</span> noteId<span class="token punctuation" >,</span>
      task<span class="token punctuation" >:</span> <span class="token string" >'New task'</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >;</span>
  <span class="token keyword" >const</span> deleteNote <span class="token operator" >=</span> <span class="token punctuation" >(</span>noteId<span class="token punctuation" >,</span> e<span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
    e<span class="token punctuation" >.</span><span class="token function" >stopPropagation</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

    NoteActions<span class="token punctuation" >.</span><span class="token keyword" >delete</span><span class="token punctuation" >(</span>noteId<span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >;</span>
  <span class="token keyword" >const</span> activateNoteEdit <span class="token operator" >=</span> id <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
    NoteActions<span class="token punctuation" >.</span><span class="token function" >update</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>id<span class="token punctuation" >,</span> editing<span class="token punctuation" >:</span> <span class="token boolean" >true</span><span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >;</span>

  <span class="token keyword" >return</span> <span class="token punctuation" >(</span>
    <span class="token operator" >&lt;</span>div <span class="token punctuation" >{</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>props<span class="token punctuation" >}</span><span class="token operator" >></span>
      <span class="token operator" >&lt;</span>div className<span class="token operator" >=</span><span class="token string" >"lane-header"</span><span class="token operator" >></span>
        <span class="token operator" >&lt;</span>div className<span class="token operator" >=</span><span class="token string" >"lane-add-note"</span><span class="token operator" >></span>
          <span class="token operator" >&lt;</span>button onClick<span class="token operator" >=</span><span class="token punctuation" >{</span>addNote<span class="token punctuation" >}</span><span class="token operator" >></span><span class="token operator" >+</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>button<span class="token operator" >></span>
        <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
        <span class="token operator" >&lt;</span>div className<span class="token operator" >=</span><span class="token string" >"lane-name"</span><span class="token operator" >></span><span class="token punctuation" >{</span>lane<span class="token punctuation" >.</span>name<span class="token punctuation" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
      <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
      <span class="token operator" >&lt;</span>Notes
        notes<span class="token operator" >=</span><span class="token punctuation" >{</span>notes<span class="token punctuation" >}</span>
        onNoteClick<span class="token operator" >=</span><span class="token punctuation" >{</span>activateNoteEdit<span class="token punctuation" >}</span>
        onEdit<span class="token operator" >=</span><span class="token punctuation" >{</span>editNote<span class="token punctuation" >}</span>
        onDelete<span class="token operator" >=</span><span class="token punctuation" >{</span>deleteNote<span class="token punctuation" >}</span> <span class="token operator" >/</span><span class="token operator" >></span>
    <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
  <span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span><span class="token punctuation" >;</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token function" >connect</span><span class="token punctuation" >(</span>
  <span class="token punctuation" >(</span><span class="token punctuation" >{</span>notes<span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >(</span><span class="token punctuation" >{</span>
    notes
  <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span> <span class="token punctuation" >{</span>
    NoteActions
  <span class="token punctuation" >}</span>
<span class="token punctuation" >)</span><span class="token punctuation" >(</span>Lane<span class="token punctuation" >)</span>
</code></pre>
<p>If you run the application and try adding new notes, you can see there&#39;s something wrong. Every note you add is shared by all lanes. If a note is modified, other lanes update too.</p>
<p><img src="/react/images/kanban_01.png" alt="Duplicate notes"></p>
<p>The reason why this happens is simple. Our <code>NoteStore</code> is a singleton. This means every component that is listening to <code>NoteStore</code> will receive the same data. We will need to resolve this problem somehow.</p>
<h2 class="header"><a class="header-anchor" href="#making-lanes-responsible-of-notes-" id="making-lanes-responsible-of-notes-"></a><span class="text">Making <code>Lanes</code> Responsible of <code>Notes</code></span><a class="header-anchor-select" href="#making-lanes-responsible-of-notes-">#</a></h2>
<p>Currently, our <code>Lane</code> contains just an array of objects. Each of the objects knows its <em>id</em> and <em>name</em>. We&#39;ll need something more sophisticated.</p>
<p>Each <code>Lane</code> needs to know which <code>Notes</code> belong to it. If a <code>Lane</code> contained an array of <code>Note</code> ids, it could then filter and display the <code>Notes</code> belonging to it. We&#39;ll implement a scheme to achieve this next.</p>
<h3 class="header"><a class="header-anchor" href="#understanding-attachtolane-" id="understanding-attachtolane-"></a><span class="text">Understanding <code>attachToLane</code></span><a class="header-anchor-select" href="#understanding-attachtolane-">#</a></h3>
<p>When we add a new <code>Note</code> to the system using <code>addNote</code>, we need to make sure it&#39;s associated to some <code>Lane</code>. This association can be modeled using a method, such as <code>LaneActions.attachToLane({laneId: &lt;id&gt;, noteId: &lt;id&gt;})</code>. Here&#39;s an example of how it could work:</p>
<pre><code class="lang-javascript"><span class="token keyword" >const</span> addNote <span class="token operator" >=</span> e <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
  e<span class="token punctuation" >.</span><span class="token function" >stopPropagation</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

  <span class="token keyword" >const</span> noteId <span class="token operator" >=</span> uuid<span class="token punctuation" >.</span><span class="token function" >v4</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

  NoteActions<span class="token punctuation" >.</span><span class="token function" >create</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
    id<span class="token punctuation" >:</span> noteId<span class="token punctuation" >,</span>
    task<span class="token punctuation" >:</span> <span class="token string" >'New task'</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  LaneActions<span class="token punctuation" >.</span><span class="token function" >attachToLane</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
    laneId<span class="token punctuation" >:</span> lane<span class="token punctuation" >.</span>id<span class="token punctuation" >,</span>
    noteId
  <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span>
</code></pre>
<p>This is just one way to handle <code>noteId</code>. We could push the generation logic within <code>NoteActions.create</code> and then return the generated id from it. We could also handle it through a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a>. This would be very useful if we added a back-end to our implementation. Here&#39;s how it would look like then:</p>
<pre><code class="lang-javascript"><span class="token keyword" >const</span> addNote <span class="token operator" >=</span> e <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
  e<span class="token punctuation" >.</span><span class="token function" >stopPropagation</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

  NoteActions<span class="token punctuation" >.</span><span class="token function" >create</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
    task<span class="token punctuation" >:</span> <span class="token string" >'New task'</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >.</span><span class="token function" >then</span><span class="token punctuation" >(</span>noteId <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
    LaneActions<span class="token punctuation" >.</span><span class="token function" >attachToLane</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
      laneId<span class="token punctuation" >:</span> lane<span class="token punctuation" >.</span>id<span class="token punctuation" >,</span>
      noteId<span class="token punctuation" >:</span> noteId
    <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >)</span>
<span class="token punctuation" >}</span>
</code></pre>
<p>Now we have declared a clear dependency between <code>NoteActions.create</code> and <code>LaneActions.attachToLane</code>. This would be one valid alternative especially if you need to go further with the implementation.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i>You could model the API using positional parameters and end up with <code>LaneActions.attachToLane(laneId, note.id)</code>. I prefer the object form as it reads well and you don&#39;t have to care about the order.</blockquote><blockquote class="tip"><i class="icon-attention-circled"></i>Another way to handle the dependency problem would be to use Flux dispatcher related feature known as <a href="http://alt.js.org/guide/wait-for/">waitFor</a>. It allows us to state dependencies on store level. It is better to avoid that if you can, though, as data management solutions like Redux make it redundant. Using <code>Promises</code> as above can help as well.</blockquote><h3 class="header"><a class="header-anchor" href="#setting-up-attachtolane-" id="setting-up-attachtolane-"></a><span class="text">Setting Up <code>attachToLane</code></span><a class="header-anchor-select" href="#setting-up-attachtolane-">#</a></h3>
<p>To get started we should add <code>attachToLane</code> to actions as before:</p>
<p><strong>app/actions/LaneActions.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >import</span> alt <span class="token keyword" >from</span> <span class="token string" >'../libs/alt'</span><span class="token punctuation" >;</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> alt<span class="token punctuation" >.</span><span class="token function" >generateActions</span><span class="token punctuation" >(</span>
  <span class="token string" >'create'</span><span class="token punctuation" >,</span> <span class="token string" >'attachToLane'</span>
<span class="token punctuation" >)</span><span class="token punctuation" >;</span>
</code></pre>
<p>In order to implement <code>attachToLane</code>, we need to find a lane matching to the given lane id and then attach note id to it. Furthermore, each note should belong only to one lane at a time. We can perform a rough check against that:</p>
<p><strong>app/stores/LaneStore.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >import</span> LaneActions <span class="token keyword" >from</span> <span class="token string" >'../actions/LaneActions'</span><span class="token punctuation" >;</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token keyword" >class</span> <span class="token class-name" >LaneStore</span> <span class="token punctuation" >{</span>
  <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
<div class="leanpub-insert">
  <span class="token function" >attachToLane</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>laneId<span class="token punctuation" >,</span> noteId<span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >this</span><span class="token punctuation" >.</span><span class="token function" >setState</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
      lanes<span class="token punctuation" >:</span> <span class="token keyword" >this</span><span class="token punctuation" >.</span>lanes<span class="token punctuation" >.</span><span class="token function" >map</span><span class="token punctuation" >(</span>lane <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
        <span class="token keyword" >if</span><span class="token punctuation" >(</span>lane<span class="token punctuation" >.</span>notes<span class="token punctuation" >.</span><span class="token function" >includes</span><span class="token punctuation" >(</span>noteId<span class="token punctuation" >)</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
          lane<span class="token punctuation" >.</span>notes <span class="token operator" >=</span> lane<span class="token punctuation" >.</span>notes<span class="token punctuation" >.</span><span class="token function" >filter</span><span class="token punctuation" >(</span>note <span class="token operator" >=</span><span class="token operator" >></span> note <span class="token operator" >!==</span> noteId<span class="token punctuation" >)</span><span class="token punctuation" >;</span>
        <span class="token punctuation" >}</span>

        <span class="token keyword" >if</span><span class="token punctuation" >(</span>lane<span class="token punctuation" >.</span>id <span class="token operator" >===</span> laneId<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
          lane<span class="token punctuation" >.</span>notes <span class="token operator" >=</span> lane<span class="token punctuation" >.</span>notes<span class="token punctuation" >.</span><span class="token function" >concat</span><span class="token punctuation" >(</span><span class="token punctuation" >[</span>noteId<span class="token punctuation" >]</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
        <span class="token punctuation" >}</span>

        <span class="token keyword" >return</span> lane<span class="token punctuation" >;</span>
      <span class="token punctuation" >}</span><span class="token punctuation" >)</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>
</div>
<span class="token punctuation" >}</span>
</code></pre>
<p>Just being able to attach notes to a lane isn&#39;t enough. We are also going to need some way to detach them. This comes up when we are removing notes.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i>We could give a warning here in case you are trying to attach a note to a lane that doesn&#39;t exist. <code>console.warn</code> would work nicely for that.</blockquote><h3 class="header"><a class="header-anchor" href="#setting-up-detachfromlane-" id="setting-up-detachfromlane-"></a><span class="text">Setting Up <code>detachFromLane</code></span><a class="header-anchor-select" href="#setting-up-detachfromlane-">#</a></h3>
<p>We can model a similar counter-operation <code>detachFromLane</code> using an API like this:</p>
<pre><code class="lang-javascript">LaneActions<span class="token punctuation" >.</span><span class="token function" >detachFromLane</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>noteId<span class="token punctuation" >,</span> laneId<span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
NoteActions<span class="token punctuation" >.</span><span class="token keyword" >delete</span><span class="token punctuation" >(</span>noteId<span class="token punctuation" >)</span><span class="token punctuation" >;</span>
</code></pre>
<blockquote class="tip"><i class="icon-attention-circled"></i>Just like with <code>attachToLane</code>, you could model the API using positional parameters and end up with <code>LaneActions.detachFromLane(laneId, noteId)</code>.</blockquote><p>Again, we should set up an action:</p>
<p><strong>app/actions/LaneActions.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >import</span> alt <span class="token keyword" >from</span> <span class="token string" >'../libs/alt'</span><span class="token punctuation" >;</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> alt<span class="token punctuation" >.</span><span class="token function" >generateActions</span><span class="token punctuation" >(</span>
  <span class="token string" >'create'</span><span class="token punctuation" >,</span> <span class="token string" >'attachToLane'</span><span class="token punctuation" >,</span> <span class="token string" >'detachFromLane'</span>
<span class="token punctuation" >)</span><span class="token punctuation" >;</span>
</code></pre>
<p>The implementation will resemble <code>attachToLane</code>. In this case, we&#39;ll remove the possibly found <code>Note</code> instead:</p>
<p><strong>app/stores/LaneStore.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >import</span> LaneActions <span class="token keyword" >from</span> <span class="token string" >'../actions/LaneActions'</span><span class="token punctuation" >;</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token keyword" >class</span> <span class="token class-name" >LaneStore</span> <span class="token punctuation" >{</span>
  <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
<div class="leanpub-insert">
  <span class="token function" >detachFromLane</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>laneId<span class="token punctuation" >,</span> noteId<span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >this</span><span class="token punctuation" >.</span><span class="token function" >setState</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
      lanes<span class="token punctuation" >:</span> <span class="token keyword" >this</span><span class="token punctuation" >.</span>lanes<span class="token punctuation" >.</span><span class="token function" >map</span><span class="token punctuation" >(</span>lane <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
        <span class="token keyword" >if</span><span class="token punctuation" >(</span>lane<span class="token punctuation" >.</span>id <span class="token operator" >===</span> laneId<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
          lane<span class="token punctuation" >.</span>notes <span class="token operator" >=</span> lane<span class="token punctuation" >.</span>notes<span class="token punctuation" >.</span><span class="token function" >filter</span><span class="token punctuation" >(</span>note <span class="token operator" >=</span><span class="token operator" >></span> note <span class="token operator" >!==</span> noteId<span class="token punctuation" >)</span><span class="token punctuation" >;</span>
        <span class="token punctuation" >}</span>

        <span class="token keyword" >return</span> lane<span class="token punctuation" >;</span>
      <span class="token punctuation" >}</span><span class="token punctuation" >)</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>
</div>
<span class="token punctuation" >}</span>
</code></pre>
<p>Given we have enough logic in place now, we can start connecting it with the user interface.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i>It is possible <code>detachFromLane</code> doesn&#39;t detach anything. If this case is detected, it would be nice to use <code>console.warn</code> to let the developer know about the situation.</blockquote><h3 class="header"><a class="header-anchor" href="#connecting-lane-with-the-logic" id="connecting-lane-with-the-logic"></a><span class="text">Connecting <code>Lane</code> with the Logic</span><a class="header-anchor-select" href="#connecting-lane-with-the-logic">#</a></h3>
<p>To make this work, there are a couple of places to tweak at <code>Lane</code>:</p>
<ul>
<li>When adding a note, we need to <strong>attach</strong> it to the current lane.</li>
<li>When deleting a note, we need to <strong>detach</strong> it from the current lane.</li>
<li>When rendering a lane, we need to <strong>select</strong> notes belonging to it. It is important to render then notes in the order they belong to a lane. This needs extra logic.</li>
</ul>
<p>These changes map to <code>Lane</code> as follows:</p>
<p><strong>app/components/Lane.jsx</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >import</span> React <span class="token keyword" >from</span> <span class="token string" >'react'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> uuid <span class="token keyword" >from</span> <span class="token string" >'uuid'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> connect <span class="token keyword" >from</span> <span class="token string" >'../libs/connect'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> NoteActions <span class="token keyword" >from</span> <span class="token string" >'../actions/NoteActions'</span><span class="token punctuation" >;</span>
<div class="leanpub-insert">
<span class="token keyword" >import</span> LaneActions <span class="token keyword" >from</span> <span class="token string" >'../actions/LaneActions'</span><span class="token punctuation" >;</span>
</div>
<span class="token keyword" >import</span> Notes <span class="token keyword" >from</span> <span class="token string" >'./Notes'</span><span class="token punctuation" >;</span>

<span class="token keyword" >const</span> Lane <span class="token operator" >=</span> <span class="token punctuation" >(</span><span class="token punctuation" >{</span>
<div class="leanpub-delete">
  lane<span class="token punctuation" >,</span> notes<span class="token punctuation" >,</span> NoteActions<span class="token punctuation" >,</span> <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>props
</div>
<div class="leanpub-insert">
  lane<span class="token punctuation" >,</span> notes<span class="token punctuation" >,</span> LaneActions<span class="token punctuation" >,</span> NoteActions<span class="token punctuation" >,</span> <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>props
</div>
<span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
  <span class="token keyword" >const</span> editNote <span class="token operator" >=</span> <span class="token punctuation" >(</span>id<span class="token punctuation" >,</span> task<span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
    <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >;</span>
  <span class="token keyword" >const</span> addNote <span class="token operator" >=</span> e <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
    e<span class="token punctuation" >.</span><span class="token function" >stopPropagation</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

    <span class="token keyword" >const</span> noteId <span class="token operator" >=</span> uuid<span class="token punctuation" >.</span><span class="token function" >v4</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

    NoteActions<span class="token punctuation" >.</span><span class="token function" >create</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
      id<span class="token punctuation" >:</span> noteId<span class="token punctuation" >,</span>
      task<span class="token punctuation" >:</span> <span class="token string" >'New task'</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<div class="leanpub-insert">
    LaneActions<span class="token punctuation" >.</span><span class="token function" >attachToLane</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
      laneId<span class="token punctuation" >:</span> lane<span class="token punctuation" >.</span>id<span class="token punctuation" >,</span>
      noteId
    <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
</div>
  <span class="token punctuation" >}</span><span class="token punctuation" >;</span>
  <span class="token keyword" >const</span> deleteNote <span class="token operator" >=</span> <span class="token punctuation" >(</span>noteId<span class="token punctuation" >,</span> e<span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
    e<span class="token punctuation" >.</span><span class="token function" >stopPropagation</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

<div class="leanpub-insert">
    LaneActions<span class="token punctuation" >.</span><span class="token function" >detachFromLane</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
      laneId<span class="token punctuation" >:</span> lane<span class="token punctuation" >.</span>id<span class="token punctuation" >,</span>
      noteId
    <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
</div>
    NoteActions<span class="token punctuation" >.</span><span class="token keyword" >delete</span><span class="token punctuation" >(</span>noteId<span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >;</span>
  <span class="token keyword" >const</span> activateNoteEdit <span class="token operator" >=</span> id <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
    NoteActions<span class="token punctuation" >.</span><span class="token function" >update</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>id<span class="token punctuation" >,</span> editing<span class="token punctuation" >:</span> <span class="token boolean" >true</span><span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >;</span>

  <span class="token keyword" >return</span> <span class="token punctuation" >(</span>
    <span class="token operator" >&lt;</span>div <span class="token punctuation" >{</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>props<span class="token punctuation" >}</span><span class="token operator" >></span>
      <span class="token operator" >&lt;</span>div className<span class="token operator" >=</span><span class="token string" >"lane-header"</span><span class="token operator" >></span>
        <span class="token operator" >&lt;</span>div className<span class="token operator" >=</span><span class="token string" >"lane-add-note"</span><span class="token operator" >></span>
          <span class="token operator" >&lt;</span>button onClick<span class="token operator" >=</span><span class="token punctuation" >{</span>addNote<span class="token punctuation" >}</span><span class="token operator" >></span><span class="token operator" >+</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>button<span class="token operator" >></span>
        <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
        <span class="token operator" >&lt;</span>div className<span class="token operator" >=</span><span class="token string" >"lane-name"</span><span class="token operator" >></span><span class="token punctuation" >{</span>lane<span class="token punctuation" >.</span>name<span class="token punctuation" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
      <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
      <span class="token operator" >&lt;</span>Notes
<div class="leanpub-delete">
        notes<span class="token operator" >=</span><span class="token punctuation" >{</span>notes<span class="token punctuation" >}</span>
</div>
<div class="leanpub-insert">
        notes<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token function" >selectNotesByIds</span><span class="token punctuation" >(</span>notes<span class="token punctuation" >,</span> lane<span class="token punctuation" >.</span>notes<span class="token punctuation" >)</span><span class="token punctuation" >}</span>
</div>
        onNoteClick<span class="token operator" >=</span><span class="token punctuation" >{</span>activateNoteEdit<span class="token punctuation" >}</span>
        onEdit<span class="token operator" >=</span><span class="token punctuation" >{</span>editNote<span class="token punctuation" >}</span>
        onDelete<span class="token operator" >=</span><span class="token punctuation" >{</span>deleteNote<span class="token punctuation" >}</span> <span class="token operator" >/</span><span class="token operator" >></span>
    <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
  <span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span><span class="token punctuation" >;</span>

<div class="leanpub-insert">
<span class="token keyword" >function</span> <span class="token function" >selectNotesByIds</span><span class="token punctuation" >(</span>allNotes<span class="token punctuation" >,</span> noteIds <span class="token operator" >=</span> <span class="token punctuation" >[</span><span class="token punctuation" >]</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  <span class="token comment" spellcheck="true">// `reduce` is a powerful method that allows us to</span>
  <span class="token comment" spellcheck="true">// fold data. You can implement `filter` and `map`</span>
  <span class="token comment" spellcheck="true">// through it. Here we are using it to concatenate</span>
  <span class="token comment" spellcheck="true">// notes matching to the ids.</span>
  <span class="token keyword" >return</span> noteIds<span class="token punctuation" >.</span><span class="token function" >reduce</span><span class="token punctuation" >(</span><span class="token punctuation" >(</span>notes<span class="token punctuation" >,</span> id<span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span>
    <span class="token comment" spellcheck="true">// Concatenate possible matching ids to the result</span>
    notes<span class="token punctuation" >.</span><span class="token function" >concat</span><span class="token punctuation" >(</span>
      allNotes<span class="token punctuation" >.</span><span class="token function" >filter</span><span class="token punctuation" >(</span>note <span class="token operator" >=</span><span class="token operator" >></span> note<span class="token punctuation" >.</span>id <span class="token operator" >===</span> id<span class="token punctuation" >)</span>
    <span class="token punctuation" >)</span>
  <span class="token punctuation" >,</span> <span class="token punctuation" >[</span><span class="token punctuation" >]</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span>
</div>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token function" >connect</span><span class="token punctuation" >(</span>
  <span class="token punctuation" >(</span><span class="token punctuation" >{</span>notes<span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >(</span><span class="token punctuation" >{</span>
    notes
  <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span> <span class="token punctuation" >{</span>
<div class="leanpub-delete">
    NoteActions
</div>
<div class="leanpub-insert">
    NoteActions<span class="token punctuation" >,</span>
    LaneActions
</div>
  <span class="token punctuation" >}</span>
<span class="token punctuation" >)</span><span class="token punctuation" >(</span>Lane<span class="token punctuation" >)</span>
</code></pre>
<p>If you try using the application now, you should see that each lane is able to maintain its own notes:</p>
<p><img src="/react/images/kanban_02.png" alt="Separate notes"></p>
<p>The current structure allows us to keep singleton stores and a flat data structure. Dealing with references is a little awkward, but that&#39;s consistent with the Flux architecture. You can see the same theme in the <a href="https://github.com/survivejs-demos/redux-demo">Redux implementation</a>. The <a href="https://github.com/survivejs-demos/mobx-demo">MobX one</a> avoids the problem altogether given we can use proper references there.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i><code>selectNotesByIds</code> could have been written in terms of <code>map</code> and <code>find</code>. In that case you would have ended up with <code>noteIds.map(id =&gt; allNotes.find(note =&gt; note.id === id));</code>. You would need to polyfill <code>find</code> in this case to support older browsers, though.</blockquote><blockquote class="tip"><i class="icon-attention-circled"></i>Normalizing the data would have made <code>selectNotesByIds</code> trivial. If you are using a solution like Redux, normalization can make operations like this easy.</blockquote><h2 class="header"><a class="header-anchor" href="#extracting-laneheader-from-lane-" id="extracting-laneheader-from-lane-"></a><span class="text">Extracting <code>LaneHeader</code> from <code>Lane</code></span><a class="header-anchor-select" href="#extracting-laneheader-from-lane-">#</a></h2>
<p><code>Lane</code> is starting to feel like a big component. This is a good chance to split it up to keep our application easier to maintain. Especially the lane header feels like a component of its own. To get started, define <code>LaneHeader</code> based on the current code like this:</p>
<p><strong>app/components/LaneHeader.jsx</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >import</span> React <span class="token keyword" >from</span> <span class="token string" >'react'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> uuid <span class="token keyword" >from</span> <span class="token string" >'uuid'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> connect <span class="token keyword" >from</span> <span class="token string" >'../libs/connect'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> NoteActions <span class="token keyword" >from</span> <span class="token string" >'../actions/NoteActions'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> LaneActions <span class="token keyword" >from</span> <span class="token string" >'../actions/LaneActions'</span><span class="token punctuation" >;</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token function" >connect</span><span class="token punctuation" >(</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >(</span><span class="token punctuation" >{</span><span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span> <span class="token punctuation" >{</span>
  NoteActions<span class="token punctuation" >,</span>
  LaneActions
<span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >(</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>lane<span class="token punctuation" >,</span> LaneActions<span class="token punctuation" >,</span> NoteActions<span class="token punctuation" >,</span> <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>props<span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
  <span class="token keyword" >const</span> addNote <span class="token operator" >=</span> e <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
    e<span class="token punctuation" >.</span><span class="token function" >stopPropagation</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

    <span class="token keyword" >const</span> noteId <span class="token operator" >=</span> uuid<span class="token punctuation" >.</span><span class="token function" >v4</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

    NoteActions<span class="token punctuation" >.</span><span class="token function" >create</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
      id<span class="token punctuation" >:</span> noteId<span class="token punctuation" >,</span>
      task<span class="token punctuation" >:</span> <span class="token string" >'New task'</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
    LaneActions<span class="token punctuation" >.</span><span class="token function" >attachToLane</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
      laneId<span class="token punctuation" >:</span> lane<span class="token punctuation" >.</span>id<span class="token punctuation" >,</span>
      noteId
    <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >;</span>

  <span class="token keyword" >return</span> <span class="token punctuation" >(</span>
    <span class="token operator" >&lt;</span>div className<span class="token operator" >=</span><span class="token string" >"lane-header"</span> <span class="token punctuation" >{</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>props<span class="token punctuation" >}</span><span class="token operator" >></span>
      <span class="token operator" >&lt;</span>div className<span class="token operator" >=</span><span class="token string" >"lane-add-note"</span><span class="token operator" >></span>
        <span class="token operator" >&lt;</span>button onClick<span class="token operator" >=</span><span class="token punctuation" >{</span>addNote<span class="token punctuation" >}</span><span class="token operator" >></span><span class="token operator" >+</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>button<span class="token operator" >></span>
      <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
      <span class="token operator" >&lt;</span>div className<span class="token operator" >=</span><span class="token string" >"lane-name"</span><span class="token operator" >></span><span class="token punctuation" >{</span>lane<span class="token punctuation" >.</span>name<span class="token punctuation" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
    <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
  <span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span><span class="token punctuation" >)</span>
</code></pre>
<p>We also need to connect the extracted component with <code>Lane</code>:</p>
<p><strong>app/components/Lane.jsx</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >import</span> React <span class="token keyword" >from</span> <span class="token string" >'react'</span><span class="token punctuation" >;</span>
<div class="leanpub-delete">
<span class="token keyword" >import</span> uuid <span class="token keyword" >from</span> <span class="token string" >'uuid'</span><span class="token punctuation" >;</span>
</div>
<span class="token keyword" >import</span> connect <span class="token keyword" >from</span> <span class="token string" >'../libs/connect'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> NoteActions <span class="token keyword" >from</span> <span class="token string" >'../actions/NoteActions'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> LaneActions <span class="token keyword" >from</span> <span class="token string" >'../actions/LaneActions'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> Notes <span class="token keyword" >from</span> <span class="token string" >'./Notes'</span><span class="token punctuation" >;</span>
<div class="leanpub-insert">
<span class="token keyword" >import</span> LaneHeader <span class="token keyword" >from</span> <span class="token string" >'./LaneHeader'</span><span class="token punctuation" >;</span>
</div>

<span class="token keyword" >const</span> Lane <span class="token operator" >=</span> <span class="token punctuation" >(</span><span class="token punctuation" >{</span>
  lane<span class="token punctuation" >,</span> notes<span class="token punctuation" >,</span> LaneActions<span class="token punctuation" >,</span> NoteActions<span class="token punctuation" >,</span> <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>props
<span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
  <span class="token keyword" >const</span> editNote <span class="token operator" >=</span> <span class="token punctuation" >(</span>id<span class="token punctuation" >,</span> task<span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
    NoteActions<span class="token punctuation" >.</span><span class="token function" >update</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>id<span class="token punctuation" >,</span> task<span class="token punctuation" >,</span> editing<span class="token punctuation" >:</span> <span class="token boolean" >false</span><span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >;</span>
<div class="leanpub-delete">
  <span class="token keyword" >const</span> addNote <span class="token operator" >=</span> e <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
    e<span class="token punctuation" >.</span><span class="token function" >stopPropagation</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

    <span class="token keyword" >const</span> noteId <span class="token operator" >=</span> uuid<span class="token punctuation" >.</span><span class="token function" >v4</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

    NoteActions<span class="token punctuation" >.</span><span class="token function" >create</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
      id<span class="token punctuation" >:</span> noteId<span class="token punctuation" >,</span>
      task<span class="token punctuation" >:</span> <span class="token string" >'New task'</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
    LaneActions<span class="token punctuation" >.</span><span class="token function" >attachToLane</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
      laneId<span class="token punctuation" >:</span> lane<span class="token punctuation" >.</span>id<span class="token punctuation" >,</span>
      noteId
    <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >;</span>
</div>
  <span class="token keyword" >const</span> deleteNote <span class="token operator" >=</span> <span class="token punctuation" >(</span>noteId<span class="token punctuation" >,</span> e<span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
    e<span class="token punctuation" >.</span><span class="token function" >stopPropagation</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

    LaneActions<span class="token punctuation" >.</span><span class="token function" >detachFromLane</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
      laneId<span class="token punctuation" >:</span> lane<span class="token punctuation" >.</span>id<span class="token punctuation" >,</span>
      noteId
    <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
    NoteActions<span class="token punctuation" >.</span><span class="token keyword" >delete</span><span class="token punctuation" >(</span>noteId<span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >;</span>
  <span class="token keyword" >const</span> activateNoteEdit <span class="token operator" >=</span> id <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
    NoteActions<span class="token punctuation" >.</span><span class="token function" >update</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>id<span class="token punctuation" >,</span> editing<span class="token punctuation" >:</span> <span class="token boolean" >true</span><span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >;</span>

  <span class="token keyword" >return</span> <span class="token punctuation" >(</span>
    <span class="token operator" >&lt;</span>div <span class="token punctuation" >{</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>props<span class="token punctuation" >}</span><span class="token operator" >></span>
<div class="leanpub-delete">
      <span class="token operator" >&lt;</span>div className<span class="token operator" >=</span><span class="token string" >"lane-header"</span><span class="token operator" >></span>
        <span class="token operator" >&lt;</span>div className<span class="token operator" >=</span><span class="token string" >"lane-add-note"</span><span class="token operator" >></span>
          <span class="token operator" >&lt;</span>button onClick<span class="token operator" >=</span><span class="token punctuation" >{</span>addNote<span class="token punctuation" >}</span><span class="token operator" >></span><span class="token operator" >+</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>button<span class="token operator" >></span>
        <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
        <span class="token operator" >&lt;</span>div className<span class="token operator" >=</span><span class="token string" >"lane-name"</span><span class="token operator" >></span><span class="token punctuation" >{</span>lane<span class="token punctuation" >.</span>name<span class="token punctuation" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
      <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
</div>
<div class="leanpub-insert">
      <span class="token operator" >&lt;</span>LaneHeader lane<span class="token operator" >=</span><span class="token punctuation" >{</span>lane<span class="token punctuation" >}</span> <span class="token operator" >/</span><span class="token operator" >></span>
</div>
      <span class="token operator" >&lt;</span>Notes
        notes<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token function" >selectNotesByIds</span><span class="token punctuation" >(</span>notes<span class="token punctuation" >,</span> lane<span class="token punctuation" >.</span>notes<span class="token punctuation" >)</span><span class="token punctuation" >}</span>
        onNoteClick<span class="token operator" >=</span><span class="token punctuation" >{</span>activateNoteEdit<span class="token punctuation" >}</span>
        onEdit<span class="token operator" >=</span><span class="token punctuation" >{</span>editNote<span class="token punctuation" >}</span>
        onDelete<span class="token operator" >=</span><span class="token punctuation" >{</span>deleteNote<span class="token punctuation" >}</span> <span class="token operator" >/</span><span class="token operator" >></span>
    <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
  <span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span><span class="token punctuation" >;</span>

<span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
</code></pre>
<p>After these changes we have something that&#39;s a little easier to work with. It would have been possible to maintain all the related code in a single component. Often these are judgment calls as you realize there are nicer ways to split up your components. Sometimes the need for reuse or performance will force you to split.</p>
<h2 class="header"><a class="header-anchor" href="#conclusion" id="conclusion"></a><span class="text">Conclusion</span><a class="header-anchor-select" href="#conclusion">#</a></h2>
<p>We managed to solve the problem of handling data dependencies in this chapter. It is a problem that comes up often. Each data management solution provides a way of its own to deal with it. Flux based alternatives and Redux expect you to manage the references. Solutions like MobX have reference handling integrated. Data normalization can make these type of operations easier.</p>
<p>In the next chapter we will focus on adding missing functionality to the application. This means tackling editing lanes. We can also make the application look a little nicer again. Fortunately a lot of the logic has been developed already.</p>
</div><div class="social-links"><blockquote class="tip">If you enjoyed this chapter, consider subscribing to the mailing list below or following <a href="https://twitter.com/survivejs">@survivejs</a> for occasional updates. There is also <a href="/atom.xml">RSS</a> available for old beards (no pun intended).</blockquote><h2 class="subscribe-header">Subscribe to the mailing list</h2><form action="//jster.us7.list-manage.com/subscribe/post?u=ed40c0084a0c5ba31b3365d65&amp;id=b853b8e786" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate social-form" target="_blank" novalidate=""><div id="mc_embed_signup_scroll"><div class="mc-field-group social-input-container"><input type="email" placeholder="Email" value="" name="EMAIL" class="required email" id="mce-EMAIL"/></div><div style="display:none;position:absolute;left:-5000px;"><input type="text" name="b_ed40c0084a0c5ba31b3365d65_b853b8e786" tabindex="-1" value=""/></div><div class="social-subscribe-container"><input type="submit" class="btn button social-subscribe" style="margin-top:1em;margin-bottom:1em;line-height:2em;" value="Subscribe" name="subscribe" id="mc-embedded-subscribe"/></div></div></form></div><div class="new-prevnext"><div class="new-prevnext__prev"><div class="new-prevnext__bg" style="background-image:url(/assets/img/chapters/hoodie.jpg);"></div><span class="new-prevnext__info">Previous chapter</span><a class="new-prevnext__link" href="/react/implementing-kanban/implementing-persistency">Implementing Persistency over localStorage</a></div><div class="new-prevnext__next"><div class="new-prevnext__bg" style="background-image:url(/assets/img/chapters/axe.jpg);"></div><span class="new-prevnext__info">Next chapter</span><a class="new-prevnext__link" href="/react/implementing-kanban/editing-lanes">Editing Lanes</a></div></div><blockquote class="tip"><p>This book is <a href="https://leanpub.com/survivejs-react">available through Leanpub</a>. By purchasing the book you support the development of further content.</p></blockquote><div id="disqus_thread"></div></div></div><div><a class="next-page" title="Editing Lanes" href="/react/implementing-kanban/editing-lanes"><i class="icon-right-open"></i></a><a class="previous-page" title="Implementing Persistency over localStorage" href="/react/implementing-kanban/implementing-persistency"><i class="icon-left-open"></i></a></div><script type="text/javascript">var disqus_shortname = 'survivejs';(function() {var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script></div><div class="nav__wrapper"><input type="checkbox" class="nav__toggle" id="nav__toggle"/><label class="nav__toggle-label" for="nav__toggle"></label><nav class="nav"><div class="nav__link"><a class="" href="/">Home</a></div><div class="nav__link"><a class="" href="/blog/">Read the blog</a></div><div class="nav__link"><a class="" href="/training/">Get training</a></div><div class="nav__link"><a class="" href="https://leanpub.com/survivejs-react">Buy the ebook</a></div><div class="nav__link"><a class="" href=""></a></div><div class="nav__link"><a class="" href="https://twitter.com/survivejs">@survivejs</a></div></nav></div><a href="https://github.com/survivejs/site" class="github-corner"><svg width="80" height="80" viewBox="0 0 250 250" style="position:absolute;top:0;fill:#000;right:0;"><path class="octo-banner" d="M0 0l115 115h15l12 27 108 108V0z" fill="#fff"></path><path class="octo-arm" d="M128 109c-15-9-9-19-9-19 3-7 2-11 2-11-1-7 3-2 3-2 4 5 2 11 2 11-3 10 5 15 9 16" style="-webkit-transform-origin:130px 106px;transform-origin:130px 106px;"></path><path class="octo-body" d="M115 115s4 2 5 0l14-14c3-2 6-3 8-3-8-11-15-24 2-41 5-5 10-7 16-7 1-2 3-7 12-11 0 0 5 3 7 16 4 2 8 5 12 9s7 8 9 12c14 3 17 7 17 7-4 8-9 11-11 11 0 6-2 11-7 16-16 16-30 10-41 2 0 3-1 7-5 11l-12 11c-1 1 1 5 1 5z"></path></svg></a><footer><div class="footer-wrapper"><div class="footer-content-wrapper"><div class="footer-social"><h3>Social</h3><ul><li><a href="https://twitter.com/survivejs" target="_blank">@survivejs</a></li><li><a href="http://eepurl.com/bth1v5" target="_blank">Mailing List</a></li><li><a href="https://gitter.im/survivejs" target="_blank">Gitter Chat</a></li><li><a href="https://github.com/survivejs" target="_blank">GitHub</a></li><li><a href="https://presentations.survivejs.com" target="_blank">Presentations</a></li><li><a href="/training/" target="_blank">Training</a></li><li><a href="/atom.xml" target="_blank">Blog RSS</a></li><li><a href="http://goo.gl/forms/OWdGIOdHm9" target="_blank">Contact</a></li><li><a href="https://github.com/survivejs/ama/issues" target="_blank">Ask Me Anything</a></li></ul></div><div class="footer-blog"><h3>From the Blog</h3><ul class="blog-teasers"><li><a class="blog-teaser" href="/blog/euro-tour-2017-recap">SurviveJS Euro Tour 2017 Recap</a></li><li><a class="blog-teaser" href="/blog/fluture-interview">Fluture - Fantasy Land compliant alternative to Promises - Interview with Aldwin Vlasblom</a></li><li><a class="blog-teaser" href="/blog/codesandbox-interview">CodeSandbox - Online React Playground - Interview with Ives van Hoorne</a></li><li><a class="blog-teaser" href="/blog/scrimba-interview">Scrimba - Interactive Screencasts Created in an Instant - Interview with Per Harald Borgen</a></li><li><a class="blog-teaser" href="/blog/survivejs-webpack-20-results-errata">SurviveJS - Webpack - v2.0 - Results and Errata</a></li><li><a class="blog-teaser" href="/blog/sanctuary-interview">Sanctuary - Refuge from unsafe JavaScript - Interview with David Chambers</a></li><li><a class="blog-teaser" href="/blog/rambda-interview">Rambda - Faster and Smaller Alternative to Ramda - Interview with Dejan Toteff</a></li><li><a class="blog-teaser" href="/blog/survivejs-webpack-20">SurviveJS - Webpack - v2.0</a></li><li><a class="blog-teaser" href="/blog/hyperapp-interview">hyperapp - Tiny Library for Frontend Applications - Interview with Jorge Bucaran</a></li><li><a class="blog-teaser" href="/blog/euro-tour-2017">SurviveJS Euro Tour 2017</a></li></ul></div></div></div></footer><div><div class="gitter-open-chat-button">Need help?</div><script type="text/javascript">
            ((window.gitter = {}).chat = {}).options = {
              showChatByDefault: false,
              activationElement: '.gitter-open-chat-button',
              room: 'survivejs/react'
            };
          </script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async="" defer=""></script></div><div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script type="text/javascript">
            docsearch({
              apiKey: '7a7d80ba370ebaf7a9afa96ad380a1e1',
              indexName: 'survivejs_react',
              inputSelector: '#search',
              debug: false
            });
          </script></div></main></body></html>