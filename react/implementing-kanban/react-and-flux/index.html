<html lang="en"><head><title>SurviveJS - React and Flux</title><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimal-ui"/><meta name="description" content="
You can get pretty far by keeping everything in components. That&#x27;s an entirely valid way to get started. The problems begin as you add state to your application and need to share it across different parts. This is the reason why various state management solutions have emerged. Each one of those tri…"/><meta name="keywords" content="webpack,react,javascript,programming,web development"/><link rel="icon" type="image/png" href="/assets/img/favicon.png"/><link rel="alternate" type="application/atom+xml" href="./atom.xml"/><link rel="stylesheet" href="/assets/main.css"/></head><body><main role="main"><div class="chapter__wrapper"><div class="header-image" style="background-image:url(/assets/img/chapters/delorean.jpg);"></div><h1 class="post__heading">React and Flux</h1><div class="header-extra"><a href="https://www.flickr.com/photos/126433814@N04/16298563416">jeremyg3030 (CC BY)</a></div><div class="toc-nav__wrapper"><h4 class="toc-nav--header">Table of Contents</h4><ul class="toc-nav"><li class="toc-intro"><a class="toc-nav__link intro" href="/react/introduction">Introduction</a></li><li class="toc-part"><a class="toc-nav__link part" href="/react/getting-started">Getting Started</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/getting-started/introduction-to-react">Introduction to React</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/getting-started/setting-up-the-project">Setting Up the Project</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/getting-started/implementing-notes">Implementing a Note Application</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/getting-started/deleting-notes">Deleting Notes</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/getting-started/understanding-react-components">Understanding React Components</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/getting-started/editing-notes">Editing Notes</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/getting-started/styling-notes">Styling the Notes Application</a></li><li class="toc-part"><a class="toc-nav__link part" href="/react/implementing-kanban">Implementing Kanban</a></li><li class="toc-chapter"><span class="toc-nav__link toc-nav__link--current chapter">React and Flux</span></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/implementing-kanban/implementing-store-and-actions">Implementing NoteStore and NoteActions</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/implementing-kanban/implementing-persistency">Implementing Persistency over localStorage</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/implementing-kanban/handling-data-dependencies">Handling Data Dependencies</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/implementing-kanban/editing-lanes">Editing Lanes</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/implementing-kanban/drag-and-drop">Implementing Drag and Drop</a></li><li class="toc-part"><a class="toc-nav__link part" href="/react/advanced-techniques">Advanced Techniques</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/advanced-techniques/testing-react">Testing React*</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/advanced-techniques/typing-with-react">Typing with React*</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/advanced-techniques/styling-react">Styling React</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/advanced-techniques/structuring-react-projects">Structuring React Projects</a></li><li class="toc-part"><a class="toc-nav__link part" href="/react/appendices">Appendices</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/appendices/language-features">Language Features</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/appendices/understanding-decorators">Understanding Decorators</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/appendices/troubleshooting">Troubleshooting</a></li></ul><div><div class="buy-container"><a href="/react/introduction"><img class="sidebar-cover" src="/assets/img/react_title_page_small.png" width="255" height="329"/></a><p><a class="btn btn--normal btn--buy" href="https://leanpub.com/survivejs-react">Buy at Leanpub</a></p></div><h3>See also</h3><div class="buy-container"><a href="/webpack/introduction"><img class="sidebar-cover" src="/assets/img/webpack_title_page_small.png" width="255" height="329"/></a><p><a class="btn btn--normal btn--buy" href="https://leanpub.com/survivejs-webpack">Buy at Leanpub</a></p></div></div></div><div class="chapter"><div class="post__content"><blockquote class="latestpost tip"><div>From the blog:</div><a class="latestpost-link" href="/blog/npms-interview">npms.io - A better and open source search for node modules - Interview with André Cruz</a></blockquote><div class="post__meta"><a class="post__end_source" href="https://github.com/survivejs/react/tree/master/project_source/implementing_kanban/01_react_and_flux" target="_blank">Finished source code</a><a class="post__demo" href="/demos/implementing-kanban/react-and-flux" target="_blank">Demo</a></div><div class="chapter-content"><p>You can get pretty far by keeping everything in components. That&#39;s an entirely valid way to get started. The problems begin as you add state to your application and need to share it across different parts. This is the reason why various state management solutions have emerged. Each one of those tries to solve the problem in its own way.</p>
<p>The <a href="https://facebook.github.io/flux/docs/overview.html">Flux application architecture</a> was the first proper solution to the problem. It allows you to model your application in terms of <strong>Actions</strong>, <strong>Stores</strong>, and <strong>Views</strong>. It also has a part known as <strong>Dispatcher</strong> to manage actions and allow you to model dependencies between different calls.</p>
<p>This separation is particularly useful when you are working with large teams. The unidirectional flow makes it easy to tell what&#39;s going on. That&#39;s a common theme in various data management solutions available for React.</p>
<h2 class="header"><a class="header-anchor" href="#quick-introduction-to-redux" id="quick-introduction-to-redux"></a><span class="text">Quick Introduction to Redux</span><a class="header-anchor-select" href="#quick-introduction-to-redux">#</a></h2>
<p>A solution known as <a href="http://redux.js.org/">Redux</a> took the core ideas of Flux and pushed them to a certain form. Redux is more of a guideline, though a powerful one, that gives your application certain structure and pushes you to model data related concerns in a certain way. You will maintain the state of your application in a single tree which you then alter using pure functions (no side effects) through reducers.</p>
<p>This might sound a little complex but in practice Redux makes your data flow very explicit. Standard Flux isn&#39;t as opinionated in certain parts. I believe understanding basic Flux before delving into Redux is a good move as you can see shared themes in both.</p>
<h2 class="header"><a class="header-anchor" href="#quick-introduction-to-mobx" id="quick-introduction-to-mobx"></a><span class="text">Quick Introduction to MobX</span><a class="header-anchor-select" href="#quick-introduction-to-mobx">#</a></h2>
<p><a href="https://mobxjs.github.io/mobx/">MobX</a> takes an entirely different view on data management. If Redux helps you to model data flow explicitly, MobX makes a large part of that implicit. It doesn&#39;t force you to any certain structure. Instead you will annotate your data structures as <strong>observable</strong> and let MobX handle updating your views.</p>
<p>Whereas Redux embraces the concept of immutability through its idea of reducers, MobX does something opposite and relies on mutation. This means aspects like reference handling can be surprisingly simple in MobX while in Redux you will most likely be forced to normalize your data so that it is easy to manipulate through reducers.</p>
<p>Both Redux and MobX are valuable in their own ways. There&#39;s no one right solution when it comes to data management. I&#39;m sure more alternatives will appear as time goes by. Each solution comes with its pros/cons. By understanding the alternatives you have a better chance of picking a solution that fits your purposes at a given time.</p>
<h2 class="header"><a class="header-anchor" href="#which-data-management-solution-to-use-" id="which-data-management-solution-to-use-"></a><span class="text">Which Data Management Solution to Use?</span><a class="header-anchor-select" href="#which-data-management-solution-to-use-">#</a></h2>
<p>The data management situation is changing constantly. At the moment <a href="http://rackt.org/redux/">Redux</a> is very strong, but there are good alternatives in sight. <a href="https://github.com/voronianski/flux-comparison">voronianski/flux-comparison</a> provides a nice comparison between some of the more popular ones.</p>
<p>When choosing a library, it comes down to your own personal preferences. You will have to consider factors, such as API, features, documentation, and support. Starting with one of the more popular alternatives can be a good idea. As you begin to understand the architecture, you are able to make choices that serve you better.</p>
<p>In this application we&#39;ll use a Flux implementation known as <a href="http://alt.js.org/">Alt</a>. The API is neat and enough for our purposes. As a bonus, Alt has been designed universal (isomorphic) rendering in mind. If you understand Flux, you have a good starting point for understanding the alternatives.</p>
<p>The book doesn&#39;t cover the alternative solutions in detail yet, but we&#39;ll design our application architecture so that it&#39;s possible to plug in alternatives at a later time. The idea is that we isolate our view portion from the data management so that we can swap parts without tweaking our React code. It&#39;s one way to design for change.</p>
<h2 class="header"><a class="header-anchor" href="#introduction-to-flux" id="introduction-to-flux"></a><span class="text">Introduction to Flux</span><a class="header-anchor-select" href="#introduction-to-flux">#</a></h2>
<p><img src="/react/images/flux_linear.png" alt="Unidirectional Flux dataflow"></p>
<p>So far, we&#39;ve been dealing only with views. Flux architecture introduces a couple of new concepts to the mix. These are actions, dispatcher, and stores. Flux implements unidirectional flow in contrast to popular frameworks, such as Angular or Ember. Even though two-directional bindings can be convenient, they come with a cost. It can be hard to deduce what&#39;s going on and why.</p>
<h3 class="header"><a class="header-anchor" href="#actions-and-stores" id="actions-and-stores"></a><span class="text">Actions and Stores</span><a class="header-anchor-select" href="#actions-and-stores">#</a></h3>
<p>Flux isn&#39;t entirely simple to understand as there are many concepts to worry about. In our case, we will model <code>NoteActions</code> and <code>NoteStore</code>. <code>NoteActions</code> provide concrete operations we can perform over our data. For instance, we can have <code>NoteActions.create({task: &#39;Learn React&#39;})</code>.</p>
<h3 class="header"><a class="header-anchor" href="#dispatcher" id="dispatcher"></a><span class="text">Dispatcher</span><a class="header-anchor-select" href="#dispatcher">#</a></h3>
<p>When we trigger an action, the dispatcher will get notified. The dispatcher will be able to deal with possible dependencies between stores. It is possible that a certain action needs to happen before another. The dispatcher allows us to achieve this.</p>
<p>At the simplest level, actions can just pass the message to the dispatcher as is. They can also trigger asynchronous queries and hit the dispatcher based on the result eventually. This allows us to deal with received data and possible errors.</p>
<p>Once the dispatcher has dealt with an action, the stores listening to it get triggered. In our case, <code>NoteStore</code> gets notified. As a result, it will be able to update its internal state. After doing this, it will notify possible listeners of the new state.</p>
<h3 class="header"><a class="header-anchor" href="#flux-dataflow" id="flux-dataflow"></a><span class="text">Flux Dataflow</span><a class="header-anchor-select" href="#flux-dataflow">#</a></h3>
<p>This completes the basic unidirectional, yet linear, process flow of Flux. Usually, though, the unidirectional process has a cyclical flow and it doesn&#39;t necessarily end. The following diagram illustrates a more common flow. It is the same idea again, but with the addition of a returning cycle. Eventually, the components depending on our store data become refreshed through this looping process.</p>
<p><img src="/react/images/flux.png" alt="Cyclical Flux dataflow"></p>
<p>This sounds like a lot of steps for achieving something simple as creating a new <code>Note</code>. The approach does come with its benefits. Given the flow is always in a single direction, it is easy to trace and debug. If there&#39;s something wrong, it&#39;s somewhere within the cycle.</p>
<p>Better yet, we can consume the same data across our application. You will just connect your view to a store and that&#39;s it. This is one of the great benefits of using a state management solution.</p>
<h3 class="header"><a class="header-anchor" href="#advantages-of-flux" id="advantages-of-flux"></a><span class="text">Advantages of Flux</span><a class="header-anchor-select" href="#advantages-of-flux">#</a></h3>
<p>Even though this sounds a little complicated, the arrangement gives our application flexibility. We can, for instance, implement API communication, caching, and i18n outside of our views. This way they stay clean of logic while keeping the application easier to understand.</p>
<p>Implementing Flux architecture in your application will actually increase the amount of code somewhat. It is important to understand that minimizing the amount of code written isn&#39;t the goal of Flux. It has been designed to allow productivity across larger teams. You could say that explicit is better than implicit.</p>
<h2 class="header"><a class="header-anchor" href="#porting-to-alt" id="porting-to-alt"></a><span class="text">Porting to Alt</span><a class="header-anchor-select" href="#porting-to-alt">#</a></h2>
<p><img src="/react/images/alt.png" alt="Alt"></p>
<p>In Alt, you&#39;ll deal with actions and stores. The dispatcher is hidden, but you will still have access to it if needed. Compared to other implementations, Alt hides a lot of boilerplate. There are special features to allow you to save and restore the application state. This is handy for implementing persistency and universal rendering.</p>
<p>There are a couple of steps we must take to push our application state to Alt:</p>
<ol>
<li>Set up an Alt instance to keep track of actions and stores and to coordinate communication.</li>
<li>Connect Alt with views.</li>
<li>Push our data to a store.</li>
<li>Define actions to manipulate the store.</li>
</ol>
<p>We&#39;ll do this gradually. The Alt specific portions will go behind adapters. The adapter approach allows us to change our mind later easier so it&#39;s worth implementing.</p>
<h3 class="header"><a class="header-anchor" href="#setting-up-an-alt-instance" id="setting-up-an-alt-instance"></a><span class="text">Setting Up an Alt Instance</span><a class="header-anchor-select" href="#setting-up-an-alt-instance">#</a></h3>
<p>Everything in Alt begins from an Alt instance. It keeps track of actions and stores and keeps communication going on. To keep things simple, we&#39;ll be treating all Alt components as a <a href="https://en.wikipedia.org/wiki/Singleton_pattern">singleton</a>. With this pattern, we reuse the same instance within the whole application.</p>
<p>To achieve this we can push it to a module of its own and then refer to that from everywhere. Configure it as follows:</p>
<p><strong>app/libs/alt.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >import</span> Alt <span class="token keyword" >from</span> <span class="token string" >'alt'</span><span class="token punctuation" >;</span>

<span class="token keyword" >const</span> alt <span class="token operator" >=</span> <span class="token keyword" >new</span> <span class="token class-name" >Alt</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> alt<span class="token punctuation" >;</span>
</code></pre>
<p>Webpack caches the modules so the next time you import Alt from somewhere, it will return the same instance again.</p>
<h3 class="header"><a class="header-anchor" href="#connecting-alt-with-views" id="connecting-alt-with-views"></a><span class="text">Connecting Alt with Views</span><a class="header-anchor-select" href="#connecting-alt-with-views">#</a></h3>
<p>Normally state management solutions provide two parts you can use to connect them with a React application. These are a <code>Provider</code> component and a <code>connect</code> higher order function (function returning function generating a component). The <code>Provider</code> sets up a React <a href="https://facebook.github.io/react/docs/context.html">context</a>.</p>
<p>Context is an advanced feature that can be used to pass data through a component hierarchy implicitly without going through props. The <code>connect</code> function uses the context to dig the data we want and then passes it to a component.</p>
<p>It is possible to use a <code>connect</code> through function invocation or a decorator as we&#39;ll see soon. The <em>Understanding Decorators</em> appendix digs deeper into the pattern.</p>
<p>To keep our application architecture easy to modify, we&#39;ll need to set up two adapters. One for <code>Provider</code> and one for <code>connect</code>. We&#39;ll deal with Alt specific details in both places.</p>
<h3 class="header"><a class="header-anchor" href="#setting-up-a-provider-" id="setting-up-a-provider-"></a><span class="text">Setting Up a <code>Provider</code></span><a class="header-anchor-select" href="#setting-up-a-provider-">#</a></h3>
<p>In order to keep our <code>Provider</code> flexible, I&#39;m going to use special configuration. We&#39;ll wrap it within a module that will choose a <code>Provider</code> depending on our environment. This enables us to use development tooling without including it to the production bundle. There&#39;s some additional setup involved, but it&#39;s worth it given you end up with a cleaner result.</p>
<p>The core of this arrangement is the index of the module. CommonJS picks up the <strong>index.js</strong> of a directory by default when we perform an import against the directory. Given the behavior we want is dynamic, we cannot rely on ES6 modules here.</p>
<p>The idea is that our tooling will rewrite the code depending on <code>process.env.NODE_ENV</code> and choose the actual module to include based on that. Here&#39;s the entry point of our <code>Provider</code>:</p>
<p><strong>app/components/Provider/index.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >if</span><span class="token punctuation" >(</span>process<span class="token punctuation" >.</span>env<span class="token punctuation" >.</span>NODE_ENV <span class="token operator" >===</span> <span class="token string" >'production'</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  module<span class="token punctuation" >.</span>exports <span class="token operator" >=</span> <span class="token function" >require</span><span class="token punctuation" >(</span><span class="token string" >'./Provider.prod'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span>
<span class="token keyword" >else</span> <span class="token punctuation" >{</span>
  module<span class="token punctuation" >.</span>exports <span class="token operator" >=</span> <span class="token function" >require</span><span class="token punctuation" >(</span><span class="token string" >'./Provider.dev'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span>
</code></pre>
<p>We also need the files the index is pointing at. The first part is easy. We&#39;ll need to point to our Alt instance there, connect it with a component known as <code>AltContainer</code>, and then render out application within it. That&#39;s where <code>props.children</code> comes in. It&#39;s the same idea as before.</p>
<p><code>AltContainer</code> will enable us to connect the data of our application at component level when we implement <code>connect</code>. To get to the point, here&#39;s the production level implementation:</p>
<p><strong>app/components/Provider/Provider.prod.jsx</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >import</span> React <span class="token keyword" >from</span> <span class="token string" >'react'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> AltContainer <span class="token keyword" >from</span> <span class="token string" >'alt-container'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> alt <span class="token keyword" >from</span> <span class="token string" >'../../libs/alt'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> setup <span class="token keyword" >from</span> <span class="token string" >'./setup'</span><span class="token punctuation" >;</span>

<span class="token function" >setup</span><span class="token punctuation" >(</span>alt<span class="token punctuation" >)</span><span class="token punctuation" >;</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token punctuation" >(</span><span class="token punctuation" >{</span>children<span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span>
  <span class="token operator" >&lt;</span>AltContainer flux<span class="token operator" >=</span><span class="token punctuation" >{</span>alt<span class="token punctuation" >}</span><span class="token operator" >></span>
    <span class="token punctuation" >{</span>children<span class="token punctuation" >}</span>
  <span class="token operator" >&lt;</span><span class="token operator" >/</span>AltContainer<span class="token operator" >></span>
</code></pre>
<p>The implementation of <code>Provider</code> can change based on which state management solution we are using. It is possible it ends up doing nothing, but that&#39;s acceptable. The idea is that we have an extension point where to alter our application if needed.</p>
<p>We are still missing one part, the development related setup. It is like the production one except this time we can enable development specific tooling. This is a good chance to move the <em>react-addons-perf</em> setup here from the <em>app/index.jsx</em> of the application. I&#39;m also enabling <a href="https://github.com/goatslacker/alt-devtool">Alt&#39;s Chrome debug utilities</a>. You&#39;ll need to install the Chrome portion separately if you want to use those.</p>
<p>Here&#39;s the full code of the development provider:</p>
<p><strong>app/components/Provider/Provider.dev.jsx</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >import</span> React <span class="token keyword" >from</span> <span class="token string" >'react'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> AltContainer <span class="token keyword" >from</span> <span class="token string" >'alt-container'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> chromeDebug <span class="token keyword" >from</span> <span class="token string" >'alt-utils/lib/chromeDebug'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> alt <span class="token keyword" >from</span> <span class="token string" >'../../libs/alt'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> setup <span class="token keyword" >from</span> <span class="token string" >'./setup'</span><span class="token punctuation" >;</span>

<span class="token function" >setup</span><span class="token punctuation" >(</span>alt<span class="token punctuation" >)</span><span class="token punctuation" >;</span>

<span class="token function" >chromeDebug</span><span class="token punctuation" >(</span>alt<span class="token punctuation" >)</span><span class="token punctuation" >;</span>

React<span class="token punctuation" >.</span>Perf <span class="token operator" >=</span> <span class="token function" >require</span><span class="token punctuation" >(</span><span class="token string" >'react-addons-perf'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token punctuation" >(</span><span class="token punctuation" >{</span>children<span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span>
  <span class="token operator" >&lt;</span>AltContainer flux<span class="token operator" >=</span><span class="token punctuation" >{</span>alt<span class="token punctuation" >}</span><span class="token operator" >></span>
    <span class="token punctuation" >{</span>children<span class="token punctuation" >}</span>
  <span class="token operator" >&lt;</span><span class="token operator" >/</span>AltContainer<span class="token operator" >></span>
</code></pre>
<p>That <code>setup</code> module allows us to perform Alt related setup that&#39;s common for both production and development environment. For now it&#39;s enough to do nothing there like this:</p>
<p><strong>app/components/Provider/setup.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >export</span> <span class="token keyword" >default</span> alt <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span><span class="token punctuation" >}</span>
</code></pre>
<p>We still need to connect the <code>Provider</code> with our application by tweaking <em>app/index.jsx</em>. Perform the following changes to hook it up:</p>
<p><strong>app/index.jsx</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >import</span> React <span class="token keyword" >from</span> <span class="token string" >'react'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> ReactDOM <span class="token keyword" >from</span> <span class="token string" >'react-dom'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> App <span class="token keyword" >from</span> <span class="token string" >'./components/App'</span><span class="token punctuation" >;</span>
<div class="leanpub-insert">
<span class="token keyword" >import</span> Provider <span class="token keyword" >from</span> <span class="token string" >'./components/Provider'</span><span class="token punctuation" >;</span>
</div>

<div class="leanpub-delete">
<span class="token keyword" >if</span><span class="token punctuation" >(</span>process<span class="token punctuation" >.</span>env<span class="token punctuation" >.</span>NODE_ENV <span class="token operator" >!==</span> <span class="token string" >'production'</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  React<span class="token punctuation" >.</span>Perf <span class="token operator" >=</span> <span class="token function" >require</span><span class="token punctuation" >(</span><span class="token string" >'react-addons-perf'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span>
</div>

ReactDOM<span class="token punctuation" >.</span><span class="token function" >render</span><span class="token punctuation" >(</span>
<div class="leanpub-delete">
  <span class="token operator" >&lt;</span>App <span class="token operator" >/</span><span class="token operator" >></span><span class="token punctuation" >,</span>
</div>
<div class="leanpub-insert">
  <span class="token operator" >&lt;</span>Provider<span class="token operator" >></span><span class="token operator" >&lt;</span>App <span class="token operator" >/</span><span class="token operator" >></span><span class="token operator" >&lt;</span><span class="token operator" >/</span>Provider<span class="token operator" >></span><span class="token punctuation" >,</span>
</div>
  document<span class="token punctuation" >.</span><span class="token function" >getElementById</span><span class="token punctuation" >(</span><span class="token string" >'app'</span><span class="token punctuation" >)</span>
<span class="token punctuation" >)</span><span class="token punctuation" >;</span>
</code></pre>
<p>If you check out Webpack output, you&#39;ll likely see it is installing new dependencies to the project. That&#39;s expected given the changes. The process might take a while to complete. Once completed, refresh the browser.</p>
<p>Given we didn&#39;t change the application logic in any way, everything should still look the same. A good next step is to implement an adapter for connecting data to our views.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i>You can see a similar idea in <a href="https://www.npmjs.com/package/react-redux">react-redux</a>. MobX won&#39;t need a Provider at all. In that case our implementation would simply return <code>children</code>.</blockquote><h2 class="header"><a class="header-anchor" href="#understanding-connect-" id="understanding-connect-"></a><span class="text">Understanding <code>connect</code></span><a class="header-anchor-select" href="#understanding-connect-">#</a></h2>
<p>The idea of <code>connect</code> is to allow us to attach specific data and actions to components. I&#39;ve modeled the API after react-redux. Fortunately we can adapt various data management systems to work against it. Here&#39;s how you would connect lane data and actions with <code>App</code>:</p>
<pre><code class="lang-javascript">@<span class="token function" >connect</span><span class="token punctuation" >(</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>lanes<span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >(</span><span class="token punctuation" >{</span>lanes<span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span> <span class="token punctuation" >{</span>
  laneActions<span class="token punctuation" >:</span> LaneActions
<span class="token punctuation" >}</span><span class="token punctuation" >)</span>
<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token keyword" >class</span> <span class="token class-name" >App</span> <span class="token keyword" >extends</span> <span class="token class-name" >React<span class="token punctuation" >.</span>Component</span> <span class="token punctuation" >{</span>
  <span class="token function" >render</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >return</span> <span class="token punctuation" >(</span>
      <span class="token operator" >&lt;</span>div<span class="token operator" >></span>
        <span class="token operator" >&lt;</span>button className<span class="token operator" >=</span><span class="token string" >"add-lane"</span> onClick<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>addLane<span class="token punctuation" >}</span><span class="token operator" >></span><span class="token operator" >+</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>button<span class="token operator" >></span>
        <span class="token operator" >&lt;</span>Lanes lanes<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >.</span>lanes<span class="token punctuation" >}</span> <span class="token operator" >/</span><span class="token operator" >></span>
      <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
    <span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>
  addLane <span class="token operator" >=</span> <span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
    <span class="token keyword" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >.</span>laneActions<span class="token punctuation" >.</span><span class="token function" >create</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>name<span class="token punctuation" >:</span> <span class="token string" >'New lane'</span><span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>
<span class="token punctuation" >}</span>
</code></pre>
<p>The same could be written without decorators. This is the syntax we&#39;ll be using in our application:</p>
<pre><code class="lang-javascript"><span class="token keyword" >class</span> <span class="token class-name" >App</span> <span class="token keyword" >extends</span> <span class="token class-name" >React<span class="token punctuation" >.</span>Component</span> <span class="token punctuation" >{</span>
  <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
<span class="token punctuation" >}</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token function" >connect</span><span class="token punctuation" >(</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>lanes<span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >(</span><span class="token punctuation" >{</span>lanes<span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span> <span class="token punctuation" >{</span>
  LaneActions
<span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >(</span>App<span class="token punctuation" >)</span>
</code></pre>
<p>In case you need to apply multiple higher order functions against a component, you could use an utility like <code>compose</code> and end up with <code>compose(a, b)(App)</code>. This would be equal to <code>a(b(App))</code> and it would read a little better.</p>
<p>As the examples show, <code>compose</code> is a function returning a function. That&#39;s why we call it a higher order function. In the end we get a component out of it. This wrapping allows us to handle our data connection concern.</p>
<p>We could use a higher order function to annotate our components to give them other special properties as well. We will see the idea again when we implement drag and drop later in this part. Decorators provide a nicer way to attach these types of annotations. The <em>Understanding Decorators</em> appendix delves deeper into the topic.</p>
<p>Now that we have a basic understanding of how <code>connect</code> should work, we can implement it.</p>
<h3 class="header"><a class="header-anchor" href="#setting-up-connect-" id="setting-up-connect-"></a><span class="text">Setting Up <code>connect</code></span><a class="header-anchor-select" href="#setting-up-connect-">#</a></h3>
<p>In this case I&#39;m going to plug in a custom <code>connect</code> to highlight a couple of key ideas. The implementation isn&#39;t optimal when it comes to performance. It is enough for this application, though.</p>
<p>It would be possible to optimize the behavior with further effort. You could use one of the established connectors instead or develop your own here. That&#39;s one reason why having control over <code>Provider</code> and <code>connect</code> is useful. It allows further customization and understanding of how the process works.</p>
<p>In case we have a custom state transformation defined, we&#39;ll dig the data we need from the <code>Provider</code>, apply it over our data as we defined, and then pass the resulting data to the component through props:</p>
<p><strong>app/libs/connect.jsx</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >import</span> React <span class="token keyword" >from</span> <span class="token string" >'react'</span><span class="token punctuation" >;</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token punctuation" >(</span>state<span class="token punctuation" >,</span> actions<span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
  <span class="token keyword" >if</span><span class="token punctuation" >(</span><span class="token keyword" >typeof</span> state <span class="token operator" >===</span> <span class="token string" >'function'</span> <span class="token operator" >||</span>
    <span class="token punctuation" >(</span><span class="token keyword" >typeof</span> state <span class="token operator" >===</span> <span class="token string" >'object'</span> <span class="token operator" >&amp;&amp;</span> Object<span class="token punctuation" >.</span><span class="token function" >keys</span><span class="token punctuation" >(</span>state<span class="token punctuation" >)</span><span class="token punctuation" >.</span>length<span class="token punctuation" >)</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >return</span> target <span class="token operator" >=</span><span class="token operator" >></span> <span class="token function" >connect</span><span class="token punctuation" >(</span>state<span class="token punctuation" >,</span> actions<span class="token punctuation" >,</span> target<span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>

  <span class="token keyword" >return</span> target <span class="token operator" >=</span><span class="token operator" >></span> props <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >(</span>
    <span class="token operator" >&lt;</span>target <span class="token punctuation" >{</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>Object<span class="token punctuation" >.</span><span class="token function" >assign</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span><span class="token punctuation" >}</span><span class="token punctuation" >,</span> props<span class="token punctuation" >,</span> actions<span class="token punctuation" >)</span><span class="token punctuation" >}</span> <span class="token operator" >/</span><span class="token operator" >></span>
  <span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span>

<span class="token comment" spellcheck="true">// Connect to Alt through context. This hasn't been optimized</span>
<span class="token comment" spellcheck="true">// at all. If Alt store changes, it will force render.</span>
<span class="token comment" spellcheck="true">//</span>
<span class="token comment" spellcheck="true">// See *AltContainer* and *connect-alt* for optimized solutions.</span>
<span class="token keyword" >function</span> <span class="token function" >connect</span><span class="token punctuation" >(</span>state <span class="token operator" >=</span> <span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span><span class="token punctuation" >}</span><span class="token punctuation" >,</span> actions <span class="token operator" >=</span> <span class="token punctuation" >{</span><span class="token punctuation" >}</span><span class="token punctuation" >,</span> target<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  <span class="token keyword" >class</span> <span class="token class-name" >Connect</span> <span class="token keyword" >extends</span> <span class="token class-name" >React<span class="token punctuation" >.</span>Component</span> <span class="token punctuation" >{</span>
    <span class="token function" >componentDidMount</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
      <span class="token keyword" >const</span> <span class="token punctuation" >{</span>flux<span class="token punctuation" >}</span> <span class="token operator" >=</span> <span class="token keyword" >this</span><span class="token punctuation" >.</span>context<span class="token punctuation" >;</span>

      flux<span class="token punctuation" >.</span>FinalStore<span class="token punctuation" >.</span><span class="token function" >listen</span><span class="token punctuation" >(</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>handleChange<span class="token punctuation" >)</span><span class="token punctuation" >;</span>
    <span class="token punctuation" >}</span>
    <span class="token function" >componentWillUnmount</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
      <span class="token keyword" >const</span> <span class="token punctuation" >{</span>flux<span class="token punctuation" >}</span> <span class="token operator" >=</span> <span class="token keyword" >this</span><span class="token punctuation" >.</span>context<span class="token punctuation" >;</span>

      flux<span class="token punctuation" >.</span>FinalStore<span class="token punctuation" >.</span><span class="token function" >unlisten</span><span class="token punctuation" >(</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>handleChange<span class="token punctuation" >)</span><span class="token punctuation" >;</span>
    <span class="token punctuation" >}</span>
    <span class="token function" >render</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
      <span class="token keyword" >const</span> <span class="token punctuation" >{</span>flux<span class="token punctuation" >}</span> <span class="token operator" >=</span> <span class="token keyword" >this</span><span class="token punctuation" >.</span>context<span class="token punctuation" >;</span>
      <span class="token keyword" >const</span> stores <span class="token operator" >=</span> flux<span class="token punctuation" >.</span>stores<span class="token punctuation" >;</span>
      <span class="token keyword" >const</span> composedStores <span class="token operator" >=</span> <span class="token function" >composeStores</span><span class="token punctuation" >(</span>stores<span class="token punctuation" >)</span><span class="token punctuation" >;</span>

      <span class="token keyword" >return</span> React<span class="token punctuation" >.</span><span class="token function" >createElement</span><span class="token punctuation" >(</span>target<span class="token punctuation" >,</span>
        <span class="token punctuation" >{</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>Object<span class="token punctuation" >.</span><span class="token function" >assign</span><span class="token punctuation" >(</span>
          <span class="token punctuation" >{</span><span class="token punctuation" >}</span><span class="token punctuation" >,</span> <span class="token keyword" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >,</span> <span class="token function" >state</span><span class="token punctuation" >(</span>composedStores<span class="token punctuation" >)</span><span class="token punctuation" >,</span> actions
        <span class="token punctuation" >)</span><span class="token punctuation" >}</span>
      <span class="token punctuation" >)</span><span class="token punctuation" >;</span>
    <span class="token punctuation" >}</span>
    handleChange <span class="token operator" >=</span> <span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
      <span class="token keyword" >this</span><span class="token punctuation" >.</span><span class="token function" >forceUpdate</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
    <span class="token punctuation" >}</span>
  <span class="token punctuation" >}</span>
  Connect<span class="token punctuation" >.</span>contextTypes <span class="token operator" >=</span> <span class="token punctuation" >{</span>
    flux<span class="token punctuation" >:</span> React<span class="token punctuation" >.</span>PropTypes<span class="token punctuation" >.</span>object<span class="token punctuation" >.</span>isRequired
  <span class="token punctuation" >}</span>

  <span class="token keyword" >return</span> Connect<span class="token punctuation" >;</span>
<span class="token punctuation" >}</span>

<span class="token comment" spellcheck="true">// Transform {store: &lt;AltStore>} to {&lt;store>: store.getState()}</span>
<span class="token keyword" >function</span> <span class="token function" >composeStores</span><span class="token punctuation" >(</span>stores<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  <span class="token keyword" >let</span> ret <span class="token operator" >=</span> <span class="token punctuation" >{</span><span class="token punctuation" >}</span><span class="token punctuation" >;</span>

  Object<span class="token punctuation" >.</span><span class="token function" >keys</span><span class="token punctuation" >(</span>stores<span class="token punctuation" >)</span><span class="token punctuation" >.</span><span class="token function" >forEach</span><span class="token punctuation" >(</span>k <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
    <span class="token keyword" >const</span> store <span class="token operator" >=</span> stores<span class="token punctuation" >[</span>k<span class="token punctuation" >]</span><span class="token punctuation" >;</span>

    <span class="token comment" spellcheck="true">// Combine store state</span>
    ret <span class="token operator" >=</span> Object<span class="token punctuation" >.</span><span class="token function" >assign</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span><span class="token punctuation" >}</span><span class="token punctuation" >,</span> ret<span class="token punctuation" >,</span> store<span class="token punctuation" >.</span><span class="token function" >getState</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

  <span class="token keyword" >return</span> ret<span class="token punctuation" >;</span>
<span class="token punctuation" >}</span>
</code></pre>
<p>As <code>flux.FinalStore</code> won&#39;t be available by default, we&#39;ll need to alter our Alt instance to contain it. After that we can access it whenever we happen to need it:</p>
<p><strong>app/libs/alt.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >import</span> Alt <span class="token keyword" >from</span> <span class="token string" >'alt'</span><span class="token punctuation" >;</span>
<div class="leanpub-insert">
<span class="token keyword" >import</span> makeFinalStore <span class="token keyword" >from</span> <span class="token string" >'alt-utils/lib/makeFinalStore'</span><span class="token punctuation" >;</span>
</div>

<div class="leanpub-delete">
<span class="token keyword" >const</span> alt <span class="token operator" >=</span> <span class="token keyword" >new</span> <span class="token class-name" >Alt</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> alt<span class="token punctuation" >;</span>
</div>
<div class="leanpub-insert">
<span class="token keyword" >class</span> <span class="token class-name" >Flux</span> <span class="token keyword" >extends</span> <span class="token class-name" >Alt</span> <span class="token punctuation" >{</span>
  <span class="token function" >constructor</span><span class="token punctuation" >(</span>config<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >super</span><span class="token punctuation" >(</span>config<span class="token punctuation" >)</span><span class="token punctuation" >;</span>

    <span class="token keyword" >this</span><span class="token punctuation" >.</span>FinalStore <span class="token operator" >=</span> <span class="token function" >makeFinalStore</span><span class="token punctuation" >(</span><span class="token keyword" >this</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>
<span class="token punctuation" >}</span>

<span class="token keyword" >const</span> flux <span class="token operator" >=</span> <span class="token keyword" >new</span> <span class="token class-name" >Flux</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> flux<span class="token punctuation" >;</span>
</div>
</code></pre>
<p>In order to see <code>connect</code> in action, we could use it to attach some dummy data to <code>App</code> and then render it. Adjust it as follows to pass data <code>test</code> to <code>App</code> and then show it in the user interface:</p>
<p><strong>app/components/App.jsx</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >import</span> React <span class="token keyword" >from</span> <span class="token string" >'react'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> uuid <span class="token keyword" >from</span> <span class="token string" >'uuid'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> Notes <span class="token keyword" >from</span> <span class="token string" >'./Notes'</span><span class="token punctuation" >;</span>
<div class="leanpub-insert">
<span class="token keyword" >import</span> connect <span class="token keyword" >from</span> <span class="token string" >'../libs/connect'</span><span class="token punctuation" >;</span>
</div>

<div class="leanpub-delete">
<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token keyword" >class</span> <span class="token class-name" >App</span> <span class="token keyword" >extends</span> <span class="token class-name" >React<span class="token punctuation" >.</span>Component</span> <span class="token punctuation" >{</span>
</div>
<div class="leanpub-insert">
<span class="token keyword" >class</span> <span class="token class-name" >App</span> <span class="token keyword" >extends</span> <span class="token class-name" >React<span class="token punctuation" >.</span>Component</span> <span class="token punctuation" >{</span>
</div>
  <span class="token function" >constructor</span><span class="token punctuation" >(</span>props<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
  <span class="token punctuation" >}</span>
  <span class="token function" >render</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >const</span> <span class="token punctuation" >{</span>notes<span class="token punctuation" >}</span> <span class="token operator" >=</span> <span class="token keyword" >this</span><span class="token punctuation" >.</span>state<span class="token punctuation" >;</span>

    <span class="token keyword" >return</span> <span class="token punctuation" >(</span>
      <span class="token operator" >&lt;</span>div<span class="token operator" >></span>
<div class="leanpub-insert">
        <span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >.</span>test<span class="token punctuation" >}</span>
</div>
        <span class="token operator" >&lt;</span>button className<span class="token operator" >=</span><span class="token string" >"add-note"</span> onClick<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>addNote<span class="token punctuation" >}</span><span class="token operator" >></span><span class="token operator" >+</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>button<span class="token operator" >></span>
        <span class="token operator" >&lt;</span>Notes
          notes<span class="token operator" >=</span><span class="token punctuation" >{</span>notes<span class="token punctuation" >}</span>
          onNoteClick<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>activateNoteEdit<span class="token punctuation" >}</span>
          onEdit<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>editNote<span class="token punctuation" >}</span>
          onDelete<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>deleteNote<span class="token punctuation" >}</span>
          <span class="token operator" >/</span><span class="token operator" >></span>
      <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
    <span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>
  <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
<span class="token punctuation" >}</span>

<div class="leanpub-insert">
<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token function" >connect</span><span class="token punctuation" >(</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >(</span><span class="token punctuation" >{</span>
  test<span class="token punctuation" >:</span> <span class="token string" >'test'</span>
<span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >)</span><span class="token punctuation" >(</span>App<span class="token punctuation" >)</span>
</div>
</code></pre>
<p>To make the text show up, refresh the browser. You should see the text that we connected to <code>App</code> now.</p>
<h2 class="header"><a class="header-anchor" href="#dispatching-in-alt" id="dispatching-in-alt"></a><span class="text">Dispatching in Alt</span><a class="header-anchor-select" href="#dispatching-in-alt">#</a></h2>
<p>Even though you can get far without ever using Flux dispatcher, it can be useful to know something about it. Alt provides two ways to use it. If you want to log everything that goes through your <code>alt</code> instance, you can use a snippet, such as <code>alt.dispatcher.register(console.log.bind(console))</code>. Alternatively, you could trigger <code>this.dispatcher.register(...)</code> at a store constructor. These mechanisms allow you to implement effective logging.</p>
<p>Other state management systems provide similar hooks. It is possible to intercept the data flow in many ways and even build custom logic on top of that.</p>
<h2 class="header"><a class="header-anchor" href="#conclusion" id="conclusion"></a><span class="text">Conclusion</span><a class="header-anchor-select" href="#conclusion">#</a></h2>
<p>In this chapter we discussed the basic idea of the Flux architecture and started porting our application to it. We pushed the state management related concerns behind an adapter to allow altering the underlying system without having to change the view related code. The next step is to implement a store for our application data and define actions to manipulate it.</p>
</div><div class="social-links"><blockquote class="tip">If you enjoyed this chapter, consider subscribing to the mailing list below or following <a href="https://twitter.com/survivejs">@survivejs</a> for occasional updates. There is also <a href="/atom.xml">RSS</a> available for old beards (no pun intended).</blockquote><h2 class="subscribe-header">Subscribe to the mailing list</h2><form action="//jster.us7.list-manage.com/subscribe/post?u=ed40c0084a0c5ba31b3365d65&amp;id=b853b8e786" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate social-form" target="_blank" novalidate=""><div id="mc_embed_signup_scroll"><div class="mc-field-group social-input-container"><input type="email" placeholder="Email" value="" name="EMAIL" class="required email" id="mce-EMAIL"/></div><div style="display:none;position:absolute;left:-5000px;"><input type="text" name="b_ed40c0084a0c5ba31b3365d65_b853b8e786" tabindex="-1" value=""/></div><div class="social-subscribe-container"><input type="submit" class="btn button social-subscribe" style="margin-top:1em;margin-bottom:1em;line-height:2em;" value="Subscribe" name="subscribe" id="mc-embedded-subscribe"/></div></div></form></div><div class="new-prevnext"><div class="new-prevnext__prev"><div class="new-prevnext__bg" style="background-image:url(/assets/img/chapters/kanban_photo.jpg);"></div><span class="new-prevnext__info">Previous chapter</span><a class="new-prevnext__link" href="/react/implementing-kanban">Implementing Kanban</a></div><div class="new-prevnext__next"><div class="new-prevnext__bg" style="background-image:url(/assets/img/chapters/jumper.jpg);"></div><span class="new-prevnext__info">Next chapter</span><a class="new-prevnext__link" href="/react/implementing-kanban/implementing-store-and-actions">Implementing NoteStore and NoteActions</a></div></div><blockquote class="tip"><p>This book is <a href="https://leanpub.com/survivejs_webpack_react">available through Leanpub</a>. By purchasing the book you support the development of further content.</p></blockquote><div id="disqus_thread"></div></div></div><div><a class="next-page" title="Implementing NoteStore and NoteActions" href="/react/implementing-kanban/implementing-store-and-actions"><i class="icon-right-open"></i></a><a class="previous-page" title="Implementing Kanban" href="/react/implementing-kanban"><i class="icon-left-open"></i></a></div><script type="text/javascript">var disqus_shortname = 'survivejs';(function() {var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script></div><div class="nav__wrapper"><input type="checkbox" class="nav__toggle" id="nav__toggle"/><label class="nav__toggle-label" for="nav__toggle"></label><nav class="nav"><div class="nav__link"><a class="" href="/">Home</a></div><div class="nav__link"><a class="" href="/blog">Read the blog</a></div><div class="nav__link"><a class="" href="https://leanpub.com/survivejs-react">Buy the ebook</a></div><div class="nav__link"><a class="" href=""></a></div><div class="nav__link"><a class="" href="https://twitter.com/survivejs">@survivejs</a></div></nav></div><div class="right ribbon github-fork-ribbon-wrapper"><div class="github-fork-ribbon" style="background-color:black;"><a href="https://github.com/survivejs/react/issues/new?title=React and Flux - " target="_blank">Submit feedback</a></div></div><footer><div class="footer-wrapper"><div class="footer-content-wrapper"><div class="footer-social"><h3>Social</h3><ul><li><a href="https://twitter.com/survivejs" target="_blank">@survivejs</a></li><li><a href="http://eepurl.com/bth1v5" target="_blank">Mailing List</a></li><li><a href="https://gitter.im/survivejs" target="_blank">Gitter Chat</a></li><li><a href="https://github.com/survivejs" target="_blank">GitHub</a></li><li><a href="/atom.xml" target="_blank">Blog RSS</a></li><li><a href="http://goo.gl/forms/OWdGIOdHm9" target="_blank">Contact</a></li><li><a href="https://github.com/survivejs/ama/issues" target="_blank">Ask Me Anything</a></li></ul></div><div class="footer-blog"><h3>From the Blog</h3><ul class="blog-teasers"><li><a class="blog-teaser" href="/blog/npms-interview">npms.io - A better and open source search for node modules - Interview with André Cruz</a></li><li><a class="blog-teaser" href="/blog/mikey-interview">Mikey - React/Redux CLI/Framework - Interview with Michael Farrell</a></li><li><a class="blog-teaser" href="/blog/survivejs-react-253">SurviveJS - React - v2.5.3</a></li><li><a class="blog-teaser" href="/blog/builder-interview">Builder - A npm-based task runner - Interview with Ryan Roemer</a></li><li><a class="blog-teaser" href="/blog/survivejs-webpack-120">SurviveJS - Webpack - v1.2.0</a></li><li><a class="blog-teaser" href="/blog/nwb-interview">nwb - CLI for React Applications and Components - Interview with Jonny Buchanan</a></li><li><a class="blog-teaser" href="/blog/kotatsu-interview">Kotatsu - Less Boilerplate for Modern JavaScript - Interview with Guillaume Plique</a></li><li><a class="blog-teaser" href="/blog/hashnode-interview">Hashnode - Community for Software Developers - Interview with Sandeep Panda</a></li><li><a class="blog-teaser" href="/blog/survivejs-webpack-110">SurviveJS - Webpack - v1.1.0</a></li><li><a class="blog-teaser" href="/blog/frzr-interview">FRZR - a Tiny View Library - Interview with Juha Lindstedt</a></li></ul></div></div></div></footer><div><div class="gitter-open-chat-button">Need help?</div><script type="text/javascript">
            ((window.gitter = {}).chat = {}).options = {
              showChatByDefault: false,
              activationElement: '.gitter-open-chat-button',
              room: 'survivejs/react'
            };
          </script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async="" defer=""></script></div></main></body></html>