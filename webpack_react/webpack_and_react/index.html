<html lang="en"><head><title>SurviveJS - Webpack and React</title><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimal-ui"/><meta name="description" content="
Combined with Webpack, React becomes a joy to work with. Even though you can use React with other build tools, Webpack is a good fit and quite straightforward to set up. In this chapter we&#x27;ll expand our configuration. After that we have a good starting point for developing our application further.
…"/><meta name="keywords" content="webpack,react,javascript,programming,web development"/><link rel="icon" type="image/png" href="/assets/img/favicon.png"/><link rel="alternate" type="application/atom+xml" href="./atom.xml"/><link rel="stylesheet" href="/assets/main.css"/></head><body><main role="main"><div class="chapter__wrapper"><div class="header-image" style="background-image:url(/images/mainframe.jpg);"></div><h1 class="post__heading">Webpack and React</h1><div class="header-extra"><a href="https://www.flickr.com/photos/10282509@N00/4674249352">Jairus Khan (CC BY-NC-SA)</a></div><div class="toc-nav__wrapper"><h4 class="toc-nav--header">Table of Contents</h4><div class="toc-nav"><a class="toc-nav__link chapter" href="/webpack_react/introduction">Introduction</a><a class="toc-nav__link part" href="/webpack_react/webpack">Setting Up Webpack</a><a class="toc-nav__link chapter" href="/webpack_react/webpack_compared">Webpack Compared</a><a class="toc-nav__link chapter" href="/webpack_react/developing_with_webpack">Developing with Webpack</a><span class="toc-nav__link toc-nav__link--current chapter">Webpack and React</span><a class="toc-nav__link part" href="/webpack_react/react">Developing Kanban Application</a><a class="toc-nav__link chapter" href="/webpack_react/implementing_notes">Implementing a Basic Note Application</a><a class="toc-nav__link chapter" href="/webpack_react/react_and_flux">React and Flux</a><a class="toc-nav__link chapter" href="/webpack_react/from_notes_to_kanban">From Notes to Kanban</a><a class="toc-nav__link chapter" href="/webpack_react/implementing_dnd">Implementing Drag and Drop</a><a class="toc-nav__link chapter" href="/webpack_react/building_kanban">Building Kanban</a><a class="toc-nav__link chapter" href="/webpack_react/testing_react">Testing React*</a><a class="toc-nav__link chapter" href="/webpack_react/typing_with_react">Typing with React*</a><a class="toc-nav__link part" href="/webpack_react/advanced">Advanced Techniques</a><a class="toc-nav__link chapter" href="/webpack_react/linting_in_webpack">Linting in Webpack</a><a class="toc-nav__link chapter" href="/webpack_react/authoring_libraries">Authoring Libraries</a><a class="toc-nav__link chapter" href="/webpack_react/styling_react">Styling React</a><a class="toc-nav__link chapter" href="/webpack_react/understanding_decorators">Understanding Decorators</a><a class="toc-nav__link chapter" href="/webpack_react/troubleshooting">Troubleshooting</a></div></div><div class="chapter"><div class="post__content"><blockquote class="front__latestpost tip"><div>From the blog:</div><a class="front__latestpost-link" href="/blog/whitestormjs-interview">WhitestormJS - Three.js Based Game Engine - Interview with Alexander Buzin</a></blockquote><div class="post__meta"><a class="post__start_source" href="https://github.com/survivejs/webpack_react/tree/master/project_source/02_developing_with_webpack/kanban_app" target="_blank">Start source code</a><a class="post__end_source" href="https://github.com/survivejs/webpack_react/tree/master/project_source/03_webpack_and_react/kanban_app" target="_blank">Finished source code</a><a class="post__demo" href="/demos/03_webpack_and_react" target="_blank">Demo</a></div><div class="chapter-content"><p>Combined with Webpack, React becomes a joy to work with. Even though you can use React with other build tools, Webpack is a good fit and quite straightforward to set up. In this chapter we&#39;ll expand our configuration. After that we have a good starting point for developing our application further.</p>
<blockquote class="tip">Common editors (Sublime Text, Visual Studio Code, vim, emacs, Atom and such) have good support for React. Even IDEs such as <a href="https://www.jetbrains.com/webstorm/">WebStorm</a> support it up to an extent. <a href="http://nuclide.io/">Nuclide</a>, an Atom based IDE, has been developed with React in mind.</blockquote><h2 class="header"><a class="header-anchor" href="#what-is-react-" id="what-is-react-"></a><span class="text">What is React?</span><a class="header-anchor-select" href="#what-is-react-">#</a></h2>
<p><img src="/images/react_header.png" alt="React"></p>
<p>Facebook&#39;s <a href="https://facebook.github.io/react/">React</a> has changed the way we think about front-end development. Also, thanks to <a href="https://facebook.github.io/react-native/">React Native</a> the approach isn&#39;t limited just to web. Although simple to learn, React provides plenty of power.</p>
<p>React isn&#39;t a framework like Angular.js or Ember. Frameworks tend to provide a lot of solutions out of the box. With React you will have to assemble your application from separate libraries. Both approaches have their merits. Frameworks may be faster to pick up, but they can become harder to work with as you hit their boundaries. In a library based approach you have more flexibility, but also responsibility.</p>
<p>React introduced a concept known as virtual DOM to web developers. React maintains a DOM of its own unlike all the libraries and frameworks before it. As changes are made to virtual DOM, React will batch the changes to the actual DOM as it sees best.</p>
<blockquote class="tip">Libraries such as <a href="https://github.com/Matt-Esch/virtual-dom">Matt-Esch/virtual-dom</a> focus entirely on Virtual DOM. If you are interested in the theory, check it out.</blockquote><h3 class="header"><a class="header-anchor" href="#jsx-and-virtual-dom" id="jsx-and-virtual-dom"></a><span class="text">JSX and Virtual DOM</span><a class="header-anchor-select" href="#jsx-and-virtual-dom">#</a></h3>
<p>React provides a <a href="https://facebook.github.io/react/docs/top-level-api.html">high level API</a> for generating virtual DOM. Generating complex structures using the API becomes cumbersome fast. Thus people usually don&#39;t write it by hand. Instead, they use some intermediate format that is converted into it. Facebook&#39;s <a href="https://facebook.github.io/jsx/">JSX</a> is one popular format.</p>
<p>JSX is a superset of JavaScript that allows you to mix XMLish syntax with JavaScript. Consider the example below:</p>
<pre><code class="lang-javascript"><span class="token keyword" >function</span> <span class="token function" >render</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  <span class="token keyword" >const</span> names <span class="token operator" >=</span> <span class="token punctuation" >[</span><span class="token string" >'John'</span><span class="token punctuation" >,</span> <span class="token string" >'Jill'</span><span class="token punctuation" >,</span> <span class="token string" >'Jack'</span><span class="token punctuation" >]</span><span class="token punctuation" >;</span>

  <span class="token keyword" >return</span> <span class="token punctuation" >(</span>
    <span class="token operator" >&lt;</span>div<span class="token operator" >></span>
      <span class="token operator" >&lt;</span>h2<span class="token operator" >></span>Names<span class="token operator" >&lt;</span><span class="token operator" >/</span>h2<span class="token operator" >></span>

      <span class="token operator" >&lt;</span>ul className<span class="token operator" >=</span><span class="token string" >"names"</span><span class="token operator" >></span><span class="token punctuation" >{</span>
        names<span class="token punctuation" >.</span><span class="token function" >map</span><span class="token punctuation" >(</span><span class="token punctuation" >(</span>name<span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span>
          <span class="token operator" >&lt;</span>li className<span class="token operator" >=</span><span class="token string" >"name"</span><span class="token operator" >></span><span class="token punctuation" >{</span>name<span class="token punctuation" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>li<span class="token operator" >></span>
        <span class="token punctuation" >)</span>
      <span class="token punctuation" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>ul<span class="token operator" >></span>
    <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
  <span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span>
</code></pre>
<p>If you haven&#39;t seen JSX before it will likely look strange. It isn&#39;t uncommon to experience &quot;JSX shock&quot; until you start to understand it. After that it all makes sense.</p>
<p>Cory House goes into more detail <a href="https://medium.com/@housecor/react-s-jsx-the-other-side-of-the-coin-2ace7ab62b98">about the shock</a>. Briefly summarized, JSX gives us a level of validation we haven&#39;t encountered earlier. It takes a while to grasp, but once you get it, it&#39;s hard to go back.</p>
<blockquote class="tip">Note that <code>render()</code> <a href="https://facebook.github.io/react/tips/maximum-number-of-jsx-root-nodes.html">must return a single node</a>. Returning multiple won&#39;t work!</blockquote><p>In JSX we are mixing something that looks a bit like HTML with JavaScript. Note how we treat attributes. Instead of using <code>class</code> as we would in vanilla HTML, we use <code>className</code>, which is the DOM equivalent. Even though JSX will feel a little weird to use at first, it will become second nature over time.</p>
<p>The developers of React have decoupled themselves from the limitations of the DOM. As a result, React is highly performant. This comes with a cost, though. The library isn&#39;t as small as you might expect. You can expect bundle sizes for small applications to be around 150-200k, React included. That is considerably less when gzipped over the wire, but it&#39;s still something.</p>
<blockquote class="tip">The interesting side benefit of this approach is that React doesn&#39;t depend on the DOM. In fact, React can use other targets, such as <a href="https://facebook.github.io/react-native/">mobile</a>, <a href="https://github.com/Flipboard/react-canvas">canvas</a>, or <a href="https://github.com/Yomguithereal/react-blessed">terminal</a>. The DOM just happens to be the most relevant one for web developers.</blockquote><h3 class="header"><a class="header-anchor" href="#better-with-friends" id="better-with-friends"></a><span class="text">Better with Friends</span><a class="header-anchor-select" href="#better-with-friends">#</a></h3>
<p>React isn&#39;t the smallest library out there. It does manage to solve fundamental problems, though. It is a pleasure to develop thanks to its relative simplicity and a powerful API. You will need to complement it with a set of tools, but you can pick these based on actual need. It&#39;s far from a &quot;one size fits all&quot; type of solution which frameworks tend to be.</p>
<p>The approach used by React allowed Facebook to develop React Native on top of the same ideas. This time instead of the DOM, we are operating on mobile platform rendering. React Native provides abstraction over components and a layout system. It provides you the setup you already know from the web. This makes it a good gateway for web developers wanting to go mobile.</p>
<h2 class="header"><a class="header-anchor" href="#babel" id="babel"></a><span class="text">Babel</span><a class="header-anchor-select" href="#babel">#</a></h2>
<p><img src="/images/babel.png" alt="Babel"></p>
<p><a href="https://babeljs.io/">Babel</a> has made a big impact on the community. It allows us to use features from the future of JavaScript. It will transform your futuristic code to a format browsers understand. You can even use it to develop your own language features. Babel&#39;s built-in JSX support will come in handy here.</p>
<p>Babel provides support for certain <a href="https://babeljs.io/docs/usage/experimental/">experimental features</a> from ES7 beyond standard ES6. Some of these might make it to the core language while some might be dropped altogether. The language proposals have been categorized within stages:</p>
<ul>
<li><strong>Stage 0</strong> - Strawman</li>
<li><strong>Stage 1</strong> - Proposal</li>
<li><strong>Stage 2</strong> - Draft - Features starting from <em>stage 2</em> have been enabled by default</li>
<li><strong>Stage 3</strong> - Candidate</li>
<li><strong>Stage 4</strong> - Finished</li>
</ul>
<p>I would be careful with <strong>stage 0</strong> features. The problem is that if the feature changes or gets removed you will end up with broken code and will need to rewrite it. In smaller experimental projects it may be worth the risk.</p>
<blockquote class="tip">You can <a href="https://babeljs.io/repl/">try out Babel online</a> to see what kind of code it generates.</blockquote><h3 class="header"><a class="header-anchor" href="#configuring-babel-loader-" id="configuring-babel-loader-"></a><span class="text">Configuring <code>babel-loader</code></span><a class="header-anchor-select" href="#configuring-babel-loader-">#</a></h3>
<p>You can use Babel with Webpack easily through <a href="https://www.npmjs.com/package/babel-loader">babel-loader</a>. It takes our ES6 module definition based code and turn it into ES5 bundles. Install <em>babel-loader</em> with</p>
<pre><code class="lang-bash">npm i babel-loader@5.x --save-dev
</code></pre>
<blockquote class="warning">We&#39;re using Babel 5 here for now as <em>babel-plugin-react-transform</em> still needs to receive its Babel 6 fixes. The configuration will change considerably with Babel 6!</blockquote><p>Besides, we need to add a loader declaration to the <em>loaders</em> section of configuration. It matches against <code>.js</code> and <code>.jsx</code> using a regular expression (<code>/\.jsx?$/</code>).</p>
<p>To keep everything performant we restrict the loader to operate within <code>./app</code> directory. This way it won&#39;t traverse <code>node_modules</code>. An alternative would be to set up an <code>exclude</code> rule against <code>node_modules</code> explicitly. I find it more useful to <code>include</code> instead as that&#39;s more explicit. You never know what files might be in the structure after all.</p>
<p>Here&#39;s the relevant configuration we need to make Babel work:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript"><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>

<span class="token keyword" >var</span> common <span class="token operator" >=</span> <span class="token punctuation" >{</span>
  entry<span class="token punctuation" >:</span> PATHS<span class="token punctuation" >.</span>app<span class="token punctuation" >,</span>
  <span class="token comment" spellcheck="true">// Add resolve.extensions. '' is needed to allow imports an extension</span>
  <span class="token comment" spellcheck="true">// Note the .'s before extensions!!! Without those matching will fail</span>
  resolve<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
    extensions<span class="token punctuation" >:</span> <span class="token punctuation" >[</span><span class="token string" >''</span><span class="token punctuation" >,</span> <span class="token string" >'.js'</span><span class="token punctuation" >,</span> <span class="token string" >'.jsx'</span><span class="token punctuation" >]</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
  module<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
    loaders<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>
      <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
      <span class="token comment" spellcheck="true">// Set up jsx. This accepts js too thanks to regex.</span>
      <span class="token punctuation" >{</span>
        test<span class="token punctuation" >:</span> <span class="token regex" >/\.jsx?$/</span><span class="token punctuation" >,</span>
        loaders<span class="token punctuation" >:</span> <span class="token punctuation" >[</span><span class="token string" >'babel'</span><span class="token punctuation" >]</span><span class="token punctuation" >,</span>
        include<span class="token punctuation" >:</span> PATHS<span class="token punctuation" >.</span>app
      <span class="token punctuation" >}</span>
    <span class="token punctuation" >]</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
  plugins<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>
    <span class="token keyword" >new</span> <span class="token class-name" >HtmlwebpackPlugin</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
      title<span class="token punctuation" >:</span> <span class="token string" >'Kanban app'</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >)</span>
  <span class="token punctuation" >]</span>
<span class="token punctuation" >}</span><span class="token punctuation" >;</span>

<span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
</code></pre>
<p>Note that <code>resolve.extensions</code> setting will allow you to refer to JSX files without an extension now. I&#39;ll be using the extension for clarity, but for now you can omit it.</p>
<blockquote class="tip">As <code>resolve.extensions</code> gets evaluated from left to right, we can use it to control which code gets loaded for given configuration. For instance, you could have <code>.web.js</code> to define web specific parts and then have something like <code>[&#39;&#39;, &#39;.web.js&#39;, &#39;.js&#39;, &#39;.jsx&#39;]</code>. If a &quot;web&quot; version of the file is found, Webpack would use that instead of the default.</blockquote><h3 class="header"><a class="header-anchor" href="#setting-up-babelrc-" id="setting-up-babelrc-"></a><span class="text">Setting Up <em>.babelrc</em></span><a class="header-anchor-select" href="#setting-up-babelrc-">#</a></h3>
<p>Also, we are going to need a <a href="https://babeljs.io/docs/usage/babelrc/">.babelrc</a>. You could pass Babel settings through Webpack (i.e., <code>babel?stage=1</code>), but then it would be just for Webpack only. That&#39;s why we are going to push our Babel settings to this specific dotfile. The same idea applies for other tools, such as ESLint.</p>
<p>We are going to enable three specific features as these will allow us to keep our project neat:</p>
<ul>
<li><a href="https://github.com/jeffmo/es-class-static-properties-and-fields">class properties</a> - Example: <code>renderNote = (note) =&gt; {</code>. This binds <code>renderNote</code> method to instances automatically. The feature makes more sense as we get to use it.</li>
<li><a href="https://github.com/wycats/javascript-decorators">decorators</a> - Example: <code>@DragDropContext(HTML5Backend)</code>. These annotation allow us to attach functionality to classes and their methods.</li>
<li><a href="https://github.com/sebmarkbage/ecmascript-rest-spread">object rest spread</a> - Example: <code>`const {a, b, ...props} = this.props</code>. This syntax allows us to extract specific properties from an object easily.</li>
</ul>
<p>Set up a <em>.babelrc</em> to your project root as follows in order to enable the features:</p>
<p><strong>.babelrc</strong></p>
<pre><code class="lang-json"><span class="token punctuation" >{</span>
  <span class="token property" >"optional"</span><span class="token operator" >:</span> <span class="token punctuation" >[</span>
    <span class="token string" >"es7.classProperties"</span><span class="token punctuation" >,</span>
    <span class="token string" >"es7.decorators"</span><span class="token punctuation" >,</span>
    <span class="token string" >"es7.objectRestSpread"</span>
  <span class="token punctuation" >]</span>
<span class="token punctuation" >}</span>
</code></pre>
<p>Alternatively we could have used a declaration such as <code>&quot;stage&quot;: 1</code>. The problem is that this doesn&#39;t document well which additional features we are using at our code base. It might work for small projects but I do not suggest this for production grade code. Documenting your Babel usage this way will help in the maintenance effort.</p>
<p>There are other possible <a href="https://babeljs.io/docs/usage/babelrc/">.babelrc options</a>. For now we are keeping it simple.</p>
<blockquote class="tip">It is possible to use Babel features at your Webpack configuration. Simply rename <em>webpack.config.js</em> as <em>webpack.config.babel.js</em> and Webpack will pick it up provided Babel has been set up with your project. It will respect the contents of <em>.babelrc</em>.</blockquote><h2 class="header"><a class="header-anchor" href="#developing-the-first-react-view" id="developing-the-first-react-view"></a><span class="text">Developing the First React View</span><a class="header-anchor-select" href="#developing-the-first-react-view">#</a></h2>
<p>It is time to add a first application level dependency to our project. Hit</p>
<pre><code class="lang-bash">npm i react react-dom --save
</code></pre>
<p>to get React installed. This will save React to the <code>dependencies</code> section of <em>package.json</em>. Later on we&#39;ll use this information to generate a vendor build for the production version. It&#39;s a good practice to separate application and development level dependencies this way.</p>
<p><em>react-dom</em> is needed as React can be used to target multiple systems (DOM, mobile, terminal, i.e.,). Given we&#39;re dealing with the browser, <em>react-dom</em> is the correct choice here.</p>
<p>Now that we got that out of the way, we can start to develop our Kanban application. First we should define the <code>App</code>. This will be the core of our application. It represents the high level view of our app and works as an entry point. Later on it will orchestrate the entire app. We can get started by using React&#39;s function based component definition syntax:</p>
<p><strong>app/components/App.jsx</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >import</span> React <span class="token keyword" >from</span> <span class="token string" >'react'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> Note <span class="token keyword" >from</span> <span class="token string" >'./Note.jsx'</span><span class="token punctuation" >;</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
  <span class="token keyword" >return</span> <span class="token operator" >&lt;</span>Note <span class="token operator" >/</span><span class="token operator" >></span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span><span class="token punctuation" >;</span>
</code></pre>
<blockquote class="tip">You can import portions from <code>react</code> using syntax <code>import React, {Component} from &#39;react&#39;;</code>. Then you can do <code>class App extends Component</code>. It is important that you import <code>React</code> as well because that JSX will get converted to <code>React.createElement</code> calls. You may find this alternative a little neater regardless.</blockquote><blockquote class="tip">It may be worth your while to install <a href="https://github.com/facebook/react-devtools">React Developer Tools</a> extension to your browser. Currently Chrome and Firefox are supported. This will make it easier to understand what&#39;s going on while developing.</blockquote><h3 class="header"><a class="header-anchor" href="#setting-up-note-" id="setting-up-note-"></a><span class="text">Setting Up <code>Note</code></span><a class="header-anchor-select" href="#setting-up-note-">#</a></h3>
<p>We also need to define the <code>Note</code> component. In this case, we will just want to show some text like <code>Learn Webpack</code>. <code>Hello world</code> would work if you are into clichés.</p>
<p><strong>app/components/Note.jsx</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >import</span> React <span class="token keyword" >from</span> <span class="token string" >'react'</span><span class="token punctuation" >;</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token keyword" >class</span> <span class="token class-name" >Note</span> <span class="token keyword" >extends</span> <span class="token class-name" >React<span class="token punctuation" >.</span>Component</span> <span class="token punctuation" >{</span>
  <span class="token function" >render</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >return</span> <span class="token operator" >&lt;</span>div<span class="token operator" >></span>Learn Webpack<span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>
<span class="token punctuation" >}</span>
</code></pre>
<blockquote class="tip">Note that we&#39;re using <em>jsx</em> extension here. It helps us to tell modules using JSX syntax apart from regular ones. It is not absolutely necessary, but it is a good convention to have.</blockquote><blockquote class="warning">It is important to note that ES6 based class approach <strong>doesn&#39;t</strong> support autobinding behavior. Apart from that you may find ES6 classes neater than <code>React.createClass</code>. See the end of this chapter for a comparison.</blockquote><h3 class="header"><a class="header-anchor" href="#rendering-through-index-jsx-" id="rendering-through-index-jsx-"></a><span class="text">Rendering Through <code>index.jsx</code></span><a class="header-anchor-select" href="#rendering-through-index-jsx-">#</a></h3>
<p>We&#39;ll need to adjust our <code>index.js</code> to render the component correctly. Note that I&#39;ve renamed it as <code>index.jsx</code> given we have JSX content there. First the rendering logic creates a DOM element where it will render. Then it renders our application through React.</p>
<p><strong>app/index.jsx</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >import</span> <span class="token string" >'./main.css'</span><span class="token punctuation" >;</span>

<span class="token keyword" >import</span> React <span class="token keyword" >from</span> <span class="token string" >'react'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> ReactDOM <span class="token keyword" >from</span> <span class="token string" >'react-dom'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> App <span class="token keyword" >from</span> <span class="token string" >'./components/App.jsx'</span><span class="token punctuation" >;</span>

<span class="token function" >main</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

<span class="token keyword" >function</span> <span class="token function" >main</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  <span class="token keyword" >const</span> app <span class="token operator" >=</span> document<span class="token punctuation" >.</span><span class="token function" >createElement</span><span class="token punctuation" >(</span><span class="token string" >'div'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

  document<span class="token punctuation" >.</span>body<span class="token punctuation" >.</span><span class="token function" >appendChild</span><span class="token punctuation" >(</span>app<span class="token punctuation" >)</span><span class="token punctuation" >;</span>

  ReactDOM<span class="token punctuation" >.</span><span class="token function" >render</span><span class="token punctuation" >(</span><span class="token operator" >&lt;</span>App <span class="token operator" >/</span><span class="token operator" >></span><span class="token punctuation" >,</span> app<span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span>
</code></pre>
<p>I&#39;ll be using <code>const</code> whenever possible. It will give me a guarantee that the reference to the object won&#39;t get changed inadvertently. It does allow you to change the object contents, though, in that you can still push new items to an array and so on.</p>
<p>If I want something mutable, I&#39;ll use <code>let</code> instead. <code>let</code> is scoped to the code block and is another new feature introduced with ES6. These both are good safety measures.</p>
<blockquote class="warning">Avoid rendering directly to <code>document.body</code>. This can cause strange problems when relying on it. Instead give React a little sandbox of its own. That way everyone, including React, will stay happy.</blockquote><p>If you hit <code>npm start</code> now, you should see something familiar at <strong>localhost:8080</strong>.</p>
<p><img src="/images/react_01.png" alt="Hello React"></p>
<p>Before moving on, this is a good chance to get rid of the old <code>component.js</code> file. It might be hanging around at <code>app</code> root.</p>
<h2 class="header"><a class="header-anchor" href="#activating-hot-loading-for-development" id="activating-hot-loading-for-development"></a><span class="text">Activating Hot Loading for Development</span><a class="header-anchor-select" href="#activating-hot-loading-for-development">#</a></h2>
<p>Note that every time you perform a modification, the browser updates with a flash. That&#39;s unfortunate because this means our application loses state. It doesn&#39;t matter yet, but as we keep on expanding the application this will become painful. It is annoying to manipulate the user interface back to the state in which it was to test something.</p>
<p>We can work around this problem using hot loading. <a href="https://github.com/gaearon/babel-plugin-react-transform">babel-plugin-react-transform</a> allow us to instrument React components in various ways. Hot loading is one of these. It is enabled through <a href="https://github.com/gaearon/react-transform-hmr">react-transform-hmr</a>.</p>
<p><em>react-transform-hmr</em> will swap React components one by one as they change without forcing a full refresh. Given it just replaces methods, it won&#39;t catch every possible change. This includes changes made to class constructors. There will be times when you will need to force a refresh, but it will work most of the time.</p>
<p>To enable hot loading for React, you should first install the packages using</p>
<pre><code class="lang-bash">npm i babel-plugin-react-transform react-transform-hmr --save-dev
</code></pre>
<p>We also need to make Babel aware of HMR. First we should pass target environment to Babel through our Webpack configuration:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript"><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>

process<span class="token punctuation" >.</span>env<span class="token punctuation" >.</span>BABEL_ENV <span class="token operator" >=</span> TARGET<span class="token punctuation" >;</span>

<span class="token keyword" >var</span> common <span class="token operator" >=</span> <span class="token punctuation" >{</span>
  <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
<span class="token punctuation" >}</span><span class="token punctuation" >;</span>

<span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
</code></pre>
<p>In addition we need to expand Babel configuration to include the plugin we need during development:</p>
<p><strong>.babelrc</strong></p>
<pre><code class="lang-json"><span class="token punctuation" >{</span>
  <span class="token property" >"optional"</span><span class="token operator" >:</span> <span class="token punctuation" >[</span>
    <span class="token string" >"es7.classProperties"</span><span class="token punctuation" >,</span>
    <span class="token string" >"es7.decorators"</span><span class="token punctuation" >,</span>
    <span class="token string" >"es7.objectRestSpread"</span>
  <span class="token punctuation" >]</span><span class="token punctuation" >,</span>
  <span class="token property" >"env"</span><span class="token operator" >:</span> <span class="token punctuation" >{</span>
    <span class="token property" >"start"</span><span class="token operator" >:</span> <span class="token punctuation" >{</span>
      <span class="token property" >"plugins"</span><span class="token operator" >:</span> <span class="token punctuation" >[</span>
        <span class="token string" >"react-transform"</span>
      <span class="token punctuation" >]</span><span class="token punctuation" >,</span>
      <span class="token property" >"extra"</span><span class="token operator" >:</span> <span class="token punctuation" >{</span>
        <span class="token property" >"react-transform"</span><span class="token operator" >:</span> <span class="token punctuation" >{</span>
          <span class="token property" >"transforms"</span><span class="token operator" >:</span> <span class="token punctuation" >[</span>
            <span class="token punctuation" >{</span>
              <span class="token property" >"transform"</span><span class="token operator" >:</span> <span class="token string" >"react-transform-hmr"</span><span class="token punctuation" >,</span>
              <span class="token property" >"imports"</span><span class="token operator" >:</span> <span class="token punctuation" >[</span><span class="token string" >"react"</span><span class="token punctuation" >]</span><span class="token punctuation" >,</span>
              <span class="token property" >"locals"</span><span class="token operator" >:</span> <span class="token punctuation" >[</span><span class="token string" >"module"</span><span class="token punctuation" >]</span>
            <span class="token punctuation" >}</span>
          <span class="token punctuation" >]</span>
        <span class="token punctuation" >}</span>
      <span class="token punctuation" >}</span>
    <span class="token punctuation" >}</span>
  <span class="token punctuation" >}</span>
<span class="token punctuation" >}</span>
</code></pre>
<p>Try hitting <code>npm start</code> again and modifying the component. Note what doesn&#39;t happen this time. There&#39;s no flash! It might take a while to sink in, but in practice, this is a powerful feature. Small things such as this add up and make you more effective.</p>
<p>Note that Babel determines the value of <code>env</code> like this:</p>
<ol>
<li>Use the value of <code>BABEL_ENV</code> if set.</li>
<li>Use the value of <code>NODE_ENV</code> if set.</li>
<li>Default to <code>development</code>.</li>
</ol>
<blockquote class="tip">If you want to show errors directly in the browser, you can configure <a href="https://github.com/gaearon/react-transform-catch-errors">react-transform-catch-errors</a>. At the time of writing it works reliable only with <code>devtool: &#39;eval&#39;</code>, but regardless it may be worth a look.</blockquote><blockquote class="warning">Note that sourcemaps won&#39;t get updated in <a href="https://code.google.com/p/chromium/issues/detail?id=492902">Chrome</a> and Firefox due to browser level bugs! This may change in the future as the browsers get patched, though.</blockquote><h2 class="header"><a class="header-anchor" href="#react-component-styles" id="react-component-styles"></a><span class="text">React Component Styles</span><a class="header-anchor-select" href="#react-component-styles">#</a></h2>
<p>Beyond ES6 classes, React allows you to construct components using <code>React.createClass()</code> and functions. <code>React.createClass()</code> was the original way to create components and it is still in use. The approaches aren&#39;t equivalent by default.</p>
<p>When you are using <code>React.createClass</code> it is possible to inject functionality using mixins. This isn&#39;t possible in ES6 by default. Yet, you can use a helper such as <a href="https://github.com/brigand/react-mixin">react-mixin</a>. In later chapters we will go through various alternative approaches. They allow you to reach roughly equivalent results as you can achieve with mixins. Often a decorator is all you need.</p>
<p>Also, ES6 class based components won&#39;t bind their methods to <code>this</code> context by default. This is the reason why it&#39;s good practice to bind the context at the component constructor. We will use this convention in this book. It leads to some extra code, but later on it is likely possible to refactor it out.</p>
<p>The class based approach decreases the amount of concepts you have to worry about. <code>constructor</code> helps to keep things simpler than in <code>React.createClass</code> based approach. There you need to define separate methods to achieve the same result.</p>
<h2 class="header"><a class="header-anchor" href="#conclusion" id="conclusion"></a><span class="text">Conclusion</span><a class="header-anchor-select" href="#conclusion">#</a></h2>
<p>You should understand how to set up React with Webpack now. Hot loading is one of those features that sets Webpack apart. Now that we have a good development environment, we can focus on React development. In the next chapter you will see how to implement a little note taking application. That will be improved in the subsequent chapters into a full blown Kanban table.</p>
</div><div class="social-links"><blockquote class="tip">If you enjoyed this chapter consider subscribing to the mailing list below or following <a href="https://twitter.com/survivejs">@survivejs</a> for occasional updates. There is also <a href="/atom.xml">RSS</a> available for old beards (no pun intended).</blockquote><form action="//jster.us7.list-manage.com/subscribe/post?u=ed40c0084a0c5ba31b3365d65&amp;id=b853b8e786" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate=""><div id="mc_embed_signup_scroll"><div class="mc-field-group"><input type="email" placeholder="Email" value="" name="EMAIL" class="required email" id="mce-EMAIL"/></div><div style="position:absolute;left:-5000px;"><input type="text" name="b_ed40c0084a0c5ba31b3365d65_b853b8e786" tabindex="-1" value=""/></div><div class="clear"><input type="submit" class="btn button" style="margin-top:1em;margin-bottom:1em;line-height:2em;" value="Subscribe" name="subscribe" id="mc-embedded-subscribe"/></div></div></form></div><div class="new-prevnext"><div class="new-prevnext__prev"><div class="new-prevnext__bg" style="background-image:url(/images/oscillo.jpg);"></div><span class="new-prevnext__info">Previous chapter</span><a class="new-prevnext__link" href="/webpack_react/developing_with_webpack">Developing with Webpack</a></div><div class="new-prevnext__next"><div class="new-prevnext__bg" style="background-image:url(/images/kanban_photo.jpg);"></div><span class="new-prevnext__info">Next chapter</span><a class="new-prevnext__link" href="/webpack_react/react">Developing Kanban Application</a></div></div><div id="disqus_thread"></div></div><a class="next-page" href="/webpack_react/react" title="Developing Kanban Application"></a><a class="previous-page" href="/webpack_react/developing_with_webpack" title="Developing with Webpack"></a></div><script type="text/javascript">var disqus_shortname = 'survivejs';(function() {var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script></div><div class="nav__wrapper"><input type="checkbox" class="nav__toggle" id="nav__toggle"/><label class="nav__toggle-label" for="nav__toggle"></label><nav class="nav"><div class="nav__link"><a class="" href="/">Home</a></div><div class="nav__link"><a class="" href="/blog">Read the blog</a></div><div class="nav__link"><a class="" href="https://leanpub.com/survivejs_webpack">Buy the full ebook</a></div><div class="nav__link"><a class="" href=""></a></div><div class="nav__link"><a class="" href="https://twitter.com/survivejs">@survivejs</a></div></nav></div><div class="right ribbon github-fork-ribbon-wrapper"><div class="github-fork-ribbon" style="background-color:black;"><a href="https://github.com/survivejs/webpack_react/issues/new?title=Webpack and React - " target="_blank">Submit feedback</a></div></div><footer><div class="footer-wrapper"><div class="footer-social"><h3>Social</h3><ul><li><a href="https://twitter.com/survivejs" target="_blank">@survivejs</a></li><li><a href="http://eepurl.com/bth1v5" target="_blank">Mailing List</a></li><li><a href="https://gitter.im/survivejs/webpack_react" target="_blank">Gitter Chat</a></li><li><a href="https://github.com/survivejs/webpack_react" target="_blank">GitHub</a></li><li><a href="/atom.xml" target="_blank">Blog RSS</a></li><li><a href="http://goo.gl/forms/OWdGIOdHm9" target="_blank">Contact</a></li></ul></div><div class="footer-blog"><h3>From the Blog</h3><ul class="blog-teasers"><li><a class="blog-teaser" href="/blog/whitestormjs-interview">WhitestormJS - Three.js Based Game Engine - Interview with Alexander Buzin</a></li><li><a class="blog-teaser" href="/blog/survivejs1915">SurviveJS - Webpack and React v1.9.15</a></li><li><a class="blog-teaser" href="/blog/react-indie-bundle">React Indie Bundle - Summary</a></li><li><a class="blog-teaser" href="/blog/starhackit-interview">StarHackIt - A Full Stack ES6/ES7 Starter Kit based on React and Node - Interview with Frederic Heem</a></li><li><a class="blog-teaser" href="/blog/survivejs1910">SurviveJS - Webpack and React v1.9.10</a></li><li><a class="blog-teaser" href="/blog/react-router5">react-router5 - Routing Alternative for React - Interview with Thomas Roch</a></li><li><a class="blog-teaser" href="/blog/survivejs-195">SurviveJS - Webpack and React v1.9.5</a></li><li><a class="blog-teaser" href="/blog/baobab-interview">Baobab - Data Trees with Cursors - Interview with Guillaume Plique</a></li><li><a class="blog-teaser" href="/blog/react-component-boilerplate-10">React Component Boilerplate v1.0</a></li><li><a class="blog-teaser" href="/blog/react-bootstrap-interview">React-Bootstrap - Bootstrap Rebuilt for React - Interview with Matt Smith</a></li></ul></div></div></footer><div><script type="text/javascript">
          ((window.gitter = {}).chat = {}).options = {
            room: 'survivejs/webpack_react'
          };
        </script>,<script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async="" defer=""></script></div></main></body></html>