<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimal-ui" />
    <meta
      name="description"
      content="" />
    <meta
      name="keywords"
      content="react" />
    <title>React Component Boilerplate v1.0</title>
    
    <link rel='icon' type='image/png' href='/assets/favicon.png'></link>

    
      <link href="/site.14763bf0fb1830432e3e.css" rel="stylesheet">
    

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css"
    />
  </head>
  <body>
    <div><div class="post__wrapper"><div class="header-image" style="background-image:url(/5066ba189586ce2d3c187fc9363ab475.jpg);"></div><h1 class="post__heading">React Component Boilerplate v1.0</h1><div class="toc-nav__wrapper"><div><div><h4 class="toc-nav--header">React</h4><ul class="toc-nav"><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/rekit-interview/">Rekit - Toolkit for building scalable React applications - Interview with Nate Wang</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/redux-first-router-interview/">Redux-First Router - Just dispatch actions - Interview with James Gillmore</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/rill-interview/">Rill - Universal web application framework - Interview with Dylan Piercey</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/material-ui-interview/">Material-UI - React Components that Implement Google&#x27;s Material Design - Interview with Olivier Tassinari</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/jss-interview/">JSS - Author CSS Using JavaScript as a Host Language - Interview with Oleg Slobodskoi</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/react-alicante-interview/">React Alicante - The international React.js conference in Spain - Interview with Victoria Quirante</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/vx-interview/">vx - The Power of D3 with the Benefits of React - Interview with Harrison Shoff</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/async-reactor-interview/">async-reactor - Render Async Stateless Functional Components in React - Interview with Sven Sauleau</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/codesandbox-interview/">CodeSandbox - Online React Playground - Interview with Ives van Hoorne</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/styletron-interview/">Styletron - Universal, high-performance JavaScript styles - Interview with Ryan Tsao</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/inferno-interview/">Inferno - Blazing fast, React-like UI library - Interview with Dominic Gannaway</a></li></ul></div></div></div><div class="post"><div class="post__content"><div><p>If you <a href="https://github.com/search?utf8=%E2%9C%93&amp;q=react+boilerplate">try searching GitHub for React boilerplates</a>, you&#39;ll find over thousand results. Nothing is harder than to agree on a standard boilerplate. As a result we have many to choose from.</p>
<p>Given I like to author React components, such as <a href="http://reactabular.js.org/">Reactabular</a>, I&#39;ve developed a little boilerplate myself. <a href="https://survivejs.github.io/react-component-boilerplate/">survivejs/react-component-boilerplate</a> incorporates a large amount of good practices. I&#39;ll go through some of them next. I cover many of them <a href="..webpack_react/authoring_libraries/">at the book</a> but it doesn&#39;t hurt to dig deeper.</p>
<h2 class="header"><a class="header-anchor" href="#testing" id="testing"></a><span class="text">Testing</span><a class="header-anchor-select" href="#testing">#</a></h2>
<p>I implemented my testing approach based on Cesar Andreu&#39;s <a href="https://github.com/cesarandreu/web-app">web-app</a>. It is based on <a href="https://karma-runner.github.io">Karma</a> (test runner), <a href="https://mochajs.org/">Mocha</a> (test framework), <a href="http://chaijs.com/">Chai</a> (assertions), and <a href="http://phantomjs.org/">PhantomJS</a> (headless browser). Code coverage reports are generated through <a href="https://gotwarlost.github.io/istanbul/">istanbul</a> and <a href="https://github.com/douglasduteil/isparta">isparta</a> (Babel compatibility for istanbul). Besides casual <em>npm test</em>, there&#39;s also a TDD mode (<em>npm run tdd</em>) so you can run tests automatically while you develop.</p>
<p>Not surprisingly this is where most of the complexity of my boilerplate lies. There&#39;s not much I can do about it, though. There are times when I wish npm allowed more granularity. If I could push test dependencies to something like <code>testDependencies</code> or define hierarchies below <code>devDependencies</code>, that would help me to communicate the intent better.</p>
<p>My earlier setup relied on Facebook&#39;s <a href="https://facebook.github.io/jest/">Jest</a>. Even though it&#39;s easier to hook it up, I find the current approach more developer friendly. I never could get into grips with Jest&#39;s auto-mocking behavior and performance was an issue even with small libraries. It is possible the situation will change but for now I&#39;m sticking with Mocha myself. Keep an eye on Jest, though.</p>
<p>Linting is handled through <a href="http://eslint.org/">ESLint</a>. It&#39;s an amazing tool and will contribute towards the quality and consistency of your code. Read <a href="..webpack_react/linting_in_webpack/">my chapter about linting</a> to get into it. There&#39;s <em>npm run lint</em> and Webpack triggers it as a pre-loader. This way I get linting warnings and errors during develop. In addition I have my editor set up to show them interactively.</p>
<h2 class="header"><a class="header-anchor" href="#handling-versions" id="handling-versions"></a><span class="text">Handling Versions</span><a class="header-anchor-select" href="#handling-versions">#</a></h2>
<p>An important part of developing libraries is actually publishing them. I&#39;ve tried to keep this simple. I can get a release out simply by hitting:</p>
<pre><code class="lang-bash">$ npm version 0.2.1
$ npm publish
$ <span class="token function" >git</span> push
$ <span class="token function" >git</span> push --tags
</code></pre>
<p>I know this could be hidden easily behind a single command but it&#39;s not too bad as I might not want to push immediately always. A tool known as <a href="https://www.npmjs.com/package/semantic-release">semantic-release</a> could simplify the workflow further but I haven&#39;t adopted it yet. </p>
<p>To make sure I get the right build artifacts out there in the current approach, I&#39;ve set up a couple of npm hooks like this:</p>
<pre><code class="lang-json"><span class="token punctuation" >{</span>
  ...
  <span class="token property" >"scripts"</span><span class="token operator" >:</span> <span class="token punctuation" >{</span>
    ...
    <span class="token property" >"preversion"</span><span class="token operator" >:</span> <span class="token string" >"npm run test &amp;&amp; npm run lint &amp;&amp; npm run dist &amp;&amp; npm run dist-min &amp;&amp; git commit --allow-empty -am \"</span>Update dist\<span class="token string" >""</span><span class="token punctuation" >,</span>
    <span class="token property" >"prepublish"</span><span class="token operator" >:</span> <span class="token string" >"npm run dist-modules"</span><span class="token punctuation" >,</span>
    <span class="token property" >"postpublish"</span><span class="token operator" >:</span> <span class="token string" >"npm run gh-pages &amp;&amp; npm run deploy-gh-pages"</span><span class="token punctuation" >,</span>
    <span class="token property" >"postinstall"</span><span class="token operator" >:</span> <span class="token string" >"node lib/post_install.js"</span>
  <span class="token punctuation" >}</span>
<span class="token punctuation" >}</span>
</code></pre>
<p><em>preversion</em> hook makes sure all tests pass, lint included, generates distribution builds, and includes those into a commit. I prefer to maintain the builds this way as it&#39;s convenient and I don&#39;t feel they bloat the repository too much. So far the approach has worked well.</p>
<p><em>prepublish</em> hook makes sure the npm version of the package gets generated. In short, it just triggers <a href="https://babeljs.io/">Babel</a> over the source and converts possible special features and JSX I&#39;m using into a form that&#39;s easy to consume from the Node.js world.</p>
<p><em>postpublish</em> generates the package site and pushes it to the <em>gh-pages</em> branch. The setup is isomorphic and it will convert the project <em>README.md</em> into a HTML structure. This was implemented to make sure the package page works even without JavaScript. There&#39;s also a minor SEO benefit. And you get to say that your boilerplate is isomorphic so there&#39;s that.</p>
<p><em>postinstall</em> portion is there to make sure that it is possible to consume the package through a GitHub reference (i.e., <code>bebraw/reactabular#hashgoeshere</code>). If I detect that there isn&#39;t expected directory, it will trigger <em>npm run dist-modules</em> just like the <em>prepublish</em> process does. The only problem is that the current solution supports only Node.js 0.12+. It would be possible to rewrite that if it becomes an issue.</p>
<h2 class="header"><a class="header-anchor" href="#pre-push-hook" id="pre-push-hook"></a><span class="text">Pre-push Hook</span><a class="header-anchor-select" href="#pre-push-hook">#</a></h2>
<p>Even though I have <a href="https://travis-ci.org/">Travis CI</a> set up and make it run my tests after each push, I&#39;ve gone a step further. I like to catch problems before a push. That&#39;s why I&#39;ve set up a pre-push hook through a package known as <a href="https://www.npmjs.com/package/git-prepush-hook">git-prepush-hook</a>. It writes the Git configuration to your repository when you install it. You can control its behavior through <em>package.json</em> by a declaration like this:</p>
<pre><code class="lang-json"><span class="token punctuation" >{</span>
  ...
  <span class="token property" >"pre-push"</span><span class="token operator" >:</span> <span class="token punctuation" >[</span>
    <span class="token string" >"test"</span><span class="token punctuation" >,</span>
    <span class="token string" >"lint"</span>
  <span class="token punctuation" >]</span>
<span class="token punctuation" >}</span>
</code></pre>
<p>You tell it what npm scripts to execute and it does that before a push. The biggest advantage of doing this is that it allows you to fix potential issues before they end up in public consumption. You can do the fix and then make it look as if you didn&#39;t make one through an interactive rebase (<code>git rebase -i</code>). It&#39;s one of those Git features that can help to keep your version history sane.</p>
<h2 class="header"><a class="header-anchor" href="#other-features" id="other-features"></a><span class="text">Other Features</span><a class="header-anchor-select" href="#other-features">#</a></h2>
<p>There&#39;s of course <a href="https://github.com/gaearon/babel-plugin-react-transform">React Transform</a> based hot loading. The Webpack configuration is a little elaborate but I&#39;ve done my best to keep it readable. You can find some usual React related optimizations there (mainly env). The isomorphic portion takes some code as well.</p>
<h2 class="header"><a class="header-anchor" href="#what-next-" id="what-next-"></a><span class="text">What Next?</span><a class="header-anchor-select" href="#what-next-">#</a></h2>
<p>I&#39;ve been thinking of pushing some of the common parts to a library of its own to ease the maintenance effort. This is the way <a href="https://www.npmjs.com/package/hjs-webpack">hjs-webpack</a> does it. The problem is that a boilerplate is a snapshot always. A library based approach would help in this regard. Most importantly, it would help to cut down the amount of dependencies.</p>
<p>I believe it could be valuable to adopt a tool such as <a href="https://commitizen.github.io/cz-cli/">commitizen</a>. That would make it easier to write meaningful Git commit messages. Even better, the tool can generate change logs for releases.</p>
<h2 class="header"><a class="header-anchor" href="#conclusion" id="conclusion"></a><span class="text">Conclusion</span><a class="header-anchor-select" href="#conclusion">#</a></h2>
<p>I hope you&#39;ll find my little boilerplate useful. There might be some ideas there you could adopt for your own. Boilerplates are a little problematic maintenance-wise, but as mentioned, it might be possible to alleviate that by pushing the problem elsewhere.</p>
<p>Of course the situation is far worse if you don&#39;t have a boilerplate to begin with. Even a small project tends to require quite a few dependencies before you can become productive with it.</p>
</div><time datetime="2015-10-22T00:00:00.000Z" class="post__moment">22 Oct 2015</time><div class="social-links"><blockquote class="tip">If you enjoyed this blog post, consider subscribing to the mailing list below or following <a href="https://twitter.com/survivejs">@survivejs</a> for occasional updates. There is also <a href="/atom.xml">RSS</a> available for old beards (no pun intended).</blockquote><h2 class="subscribe-header">Subscribe to the mailing list</h2><form action="//jster.us7.list-manage.com/subscribe/post?u=ed40c0084a0c5ba31b3365d65&amp;amp;id=b853b8e786" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate social-form" target="_blank" novalidate=""><div id="mc_embed_signup_scroll"><div class="mc-field-group social-input-container"><input type="email" placeholder="Email" value="" name="EMAIL" class="required email" id="mce-EMAIL"/></div><div style="display:none;position:absolute;left:-5000px;"><input type="text" name="b_ed40c0084a0c5ba31b3365d65_b853b8e786" tabindex="-1" value=""/></div><div class="social-subscribe-container"><input type="submit" class="btn button social-subscribe" style="margin-top:1em;margin-bottom:1em;line-height:2em;" value="Subscribe" name="subscribe" id="mc-embedded-subscribe"/></div></div></form></div><div class="new-prevnext"><div class="new-prevnext__prev"><div class="new-prevnext__bg" style="background-image:url(/0fad3bc8ff2183df796e16468ec94058.jpg);"></div><span class="new-prevnext__info">Previous post</span><a class="new-prevnext__link" href="/blog/react-bootstrap-interview/">React-Bootstrap - Bootstrap Rebuilt for React - Interview with Matt Smith</a></div><div class="new-prevnext__next"><div class="new-prevnext__bg" style="background-image:url(/8604f0c4fe624c1bbba0ab8c132efd17.jpg);"></div><span class="new-prevnext__info">Next post</span><a class="new-prevnext__link" href="/blog/baobab-interview/">Baobab - Data Trees with Cursors - Interview with Guillaume Plique</a></div></div><div id="disqus_thread"></div></div></div><div><a class="next-page" title="Baobab - Data Trees with Cursors - Interview with Guillaume Plique" href="/blog/baobab-interview/"><i class="icon-right-open"></i></a><a class="previous-page" title="React-Bootstrap - Bootstrap Rebuilt for React - Interview with Matt Smith" href="/blog/react-bootstrap-interview/"><i class="icon-left-open"></i></a></div><script type="text/javascript">var disqus_shortname = 'survivejs';(function() {var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script></div><div class="nav__wrapper"><input type="checkbox" class="nav__toggle" id="nav__toggle"/><label class="nav__toggle-label" for="nav__toggle"></label><nav class="nav"><div class="nav__link"><a href="/">Home</a></div><div class="nav__link"><a href="/webpack/foreword/">Read the webpack book</a></div><div class="nav__link"><a href="/training/">Get training</a></div><div class="nav__link"><a href="https://leanpub.com/survivejs-react">Buy the ebook</a></div><div class="nav__link"><a href="/"></a></div><div class="nav__link"><a href="https://twitter.com/survivejs">@survivejs</a></div></nav></div><a href="https://github.com/survivejs/site" class="github-corner"><svg width="80" height="80" viewBox="0 0 250 250" style="position:absolute;top:0;fill:#000;right:0;"><path class="octo-banner" d="M0 0l115 115h15l12 27 108 108V0z" fill="#fff"></path><path class="octo-arm" d="M128 109c-15-9-9-19-9-19 3-7 2-11 2-11-1-7 3-2 3-2 4 5 2 11 2 11-3 10 5 15 9 16" style="-webkit-transform-origin:130px 106px;transform-origin:130px 106px;"></path><path class="octo-body" d="M115 115s4 2 5 0l14-14c3-2 6-3 8-3-8-11-15-24 2-41 5-5 10-7 16-7 1-2 3-7 12-11 0 0 5 3 7 16 4 2 8 5 12 9s7 8 9 12c14 3 17 7 17 7-4 8-9 11-11 11 0 6-2 11-7 16-16 16-30 10-41 2 0 3-1 7-5 11l-12 11c-1 1 1 5 1 5z"></path></svg></a><footer><div class="footer-wrapper"><div class="footer-content-wrapper"><div class="footer-social"><h3>Social</h3><ul><li><a href="https://twitter.com/survivejs" target="_blank" rel="noopener noreferrer">@survivejs</a></li><li><a href="http://eepurl.com/bth1v5" target="_blank" rel="noopener noreferrer">Mailing List</a></li><li><a href="https://gitter.im/survivejs" target="_blank" rel="noopener noreferrer">Gitter Chat</a></li><li><a href="https://github.com/survivejs" target="_blank" rel="noopener noreferrer">GitHub</a></li><li><a href="https://presentations.survivejs.com" target="_blank" rel="noopener noreferrer">Presentations</a></li><li><a href="http://goo.gl/forms/OWdGIOdHm9" target="_blank" rel="noopener noreferrer">Contact</a></li><li><a href="https://github.com/survivejs/ama/issues" target="_blank" rel="noopener noreferrer">Ask Me Anything</a></li></ul></div><div class="footer-blog"><h3>From the Blog</h3><ul class="blog-teasers"><li><a class="blog-teaser" href="/blog/motorcycle-interview/">Motorcycle.js - A statically-typed, functional and reactive framework for modern browsers - Interview with Tylor Steinberger</a></li><li><a class="blog-teaser" href="/blog/nextjs-interview/">Next.js - Framework for server-rendered React apps - Interview with Arunoda Susiripala</a></li><li><a class="blog-teaser" href="/blog/rekit-interview/">Rekit - Toolkit for building scalable React applications - Interview with Nate Wang</a></li><li><a class="blog-teaser" href="/blog/redux-first-router-interview/">Redux-First Router - Just dispatch actions - Interview with James Gillmore</a></li><li><a class="blog-teaser" href="/blog/documentationjs-interview/">documentation.js - The documentation system for modern JavaScript - Interview with Tom MacWright</a></li><li><a class="blog-teaser" href="/blog/rill-interview/">Rill - Universal web application framework - Interview with Dylan Piercey</a></li><li><a class="blog-teaser" href="/blog/dll-interview/">d-l-l - Easy, automatic, optimized DLL config handler for webpack - Interview with James Wiens</a></li></ul></div></div></div></footer><div><div class="gitter-open-chat-button">Need help?</div><script type="text/javascript">
          ((window.gitter = {}).chat = {}).options = {
            showChatByDefault: false,
            activationElement: '.gitter-open-chat-button',
            room: 'survivejs/react'
          };
        </script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async="" defer=""></script></div></div>

    
  </body>
</html>
