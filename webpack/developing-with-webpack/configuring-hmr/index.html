<html lang="en"><head><title>SurviveJS - Configuring Hot Module Replacement</title><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimal-ui"/><meta name="description" content="
Hot Module Replacement (HMR) builds on top the WDS. It enables an interface that makes it possible to swap modules live. For example, style-loader is able to update your CSS without forcing a refresh. It is easy to perform HMR with CSS as it doesn&#x27;t contain any application state.

HMR is possible w…"/><meta name="keywords" content="webpack,react,javascript,programming,web development"/><link rel="icon" type="image/png" href="/assets/img/favicon.png"/><link rel="alternate" type="application/atom+xml" href="/atom.xml"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css"/><link rel="stylesheet" href="/assets/main.css"/></head><body><main role="main"><div class="chapter__wrapper"><div class="header-image" style="background-image:url(/assets/img/chapters/inferno.jpg);"></div><h1 class="post__heading">Configuring Hot Module Replacement</h1><div class="header-extra"><a href="https://pixabay.com/en/flame-fire-inferno-orange-burn-1761916/">DanielBrachlow (Public Domain)</a></div><div class="toc-nav__wrapper"><h4 class="search-nav--header">Search</h4><input id="search"/><h4 class="toc-nav--header">Table of Contents</h4><ul class="toc-nav"><li class="toc-intro"><a class="toc-nav__link intro" href="/webpack/introduction">Introduction</a></li><li class="toc-intro"><a class="toc-nav__link intro" href="/webpack/webpack-compared">Webpack Compared</a></li><li class="toc-intro"><a class="toc-nav__link intro" href="/webpack/why-webpack">Why Webpack?</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/developing-with-webpack">Developing with Webpack</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/developing-with-webpack/getting-started">Getting Started</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/developing-with-webpack/splitting-configuration">Splitting the Configuration</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/developing-with-webpack/automatic-browser-refresh">Automatic Browser Refresh</a></li><li class="toc-chapter"><span class="toc-nav__link toc-nav__link--current chapter">Configuring Hot Module Replacement</span></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/developing-with-webpack/linting">Linting JavaScript</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/handling-styles">Handling Styles with Webpack</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/handling-styles/loading">Loading Styles</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/handling-styles/separating-css">Separating CSS</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/handling-styles/eliminating-unused-css">Eliminating Unused CSS</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/handling-styles/linting">Linting CSS</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/understanding-loaders">Understanding Loaders</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/understanding-loaders/loader-definitions">Loader Definitions</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/understanding-loaders/loading-images">Loading Images</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/understanding-loaders/loading-fonts">Loading Fonts</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/understanding-loaders/writing-loaders">Writing Loaders</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/building-with-webpack">Building with Webpack</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building-with-webpack/enabling-sourcemaps">Enabling Sourcemaps</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building-with-webpack/splitting-bundles">Splitting Bundles</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building-with-webpack/code-splitting">Code Splitting</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building-with-webpack/processing-with-babel">Processing with Babel</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building-with-webpack/cleaning-build">Cleaning the Build</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building-with-webpack/hosting-on-github-pages">Hosting on GitHub Pages</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/optimizing-build">Optimizing Build</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing-build/minifying">Minifying the Build</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing-build/setting-environment-variables">Setting Environment Variables</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing-build/adding-hashes-to-filenames">Adding Hashes to Filenames</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing-build/analyzing-build-statistics">Analyzing Build Statistics</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/advanced-techniques">Advanced Techniques</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/advanced-techniques/consuming-packages">Consuming Packages</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/advanced-techniques/authoring-packages">Authoring Packages</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/advanced-techniques/configuring-react">Configuring React</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/appendices">Appendices</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/searching-with-react">Searching with React</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/configuring-hmr-with-react">Configuring Hot Module Replacement with React</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/writing-eslint-plugins">Writing ESLint Plugins</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/customizing-eslint">Customizing ESLint</a></li></ul><div><div class="buy-container"><a href="/webpack/introduction"><img class="sidebar-cover" src="/assets/img/webpack_title_page_small.png" width="255" height="329"/></a><p><a class="btn btn--normal btn--buy" href="https://leanpub.com/survivejs-webpack">Buy at Leanpub</a></p></div><h3>See also</h3><div class="buy-container"><a href="/react/introduction"><img class="sidebar-cover" src="/assets/img/react_title_page_small.png" width="255" height="329"/></a><p><a class="btn btn--normal btn--buy" href="https://leanpub.com/survivejs-react">Buy at Leanpub</a></p></div></div></div><div class="chapter"><div class="post__content"><blockquote class="latestpost tip"><div>From the blog:</div><a class="latestpost-link" href="/blog/survivejs-webpack-150">SurviveJS - Webpack - v1.5.0</a></blockquote><div class="chapter-content"><p><strong>Hot Module Replacement</strong> (HMR) builds on top the WDS. It enables an interface that makes it possible to swap modules live. For example, <em>style-loader</em> is able to update your CSS without forcing a refresh. It is easy to perform HMR with CSS as it doesn&#39;t contain any application state.</p>
<p>HMR is possible with JavaScript too, but due to the state we have in our applications, it&#39;s harder. In the <em>Configuring React</em> chapter we discuss how to set it up with React. You can use the same idea elsewhere.</p>
<p>We could use <code>webpack-dev-server --hot</code> to achieve this from the CLI. <code>--hot</code> enables the HMR portion from webpack through a specific plugin designed for this purpose and writes an entry pointing to a JavaScript file related to it.</p>
<h2 class="header"><a class="header-anchor" href="#defining-configuration-for-hmr" id="defining-configuration-for-hmr"></a><span class="text">Defining Configuration for HMR</span><a class="header-anchor-select" href="#defining-configuration-for-hmr">#</a></h2>
<p>To keep our configuration manageable, I&#39;ll split functionalities like HMR into <em>parts</em> of their own. This keeps our <em>webpack.config.js</em> simple and promotes reuse. We could push a collection like this to a npm package of its own. We could even turn them into presets to use across projects. Functional composition allows that.</p>
<p>Here&#39;s what a part implementing HMR looks like:</p>
<p><strong>webpack.parts.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >const</span> webpack <span class="token operator" >=</span> <span class="token function" >require</span><span class="token punctuation" >(</span><span class="token string" >'webpack'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

exports<span class="token punctuation" >.</span>devServer <span class="token operator" >=</span> <span class="token keyword" >function</span><span class="token punctuation" >(</span>options<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  <span class="token keyword" >return</span> <span class="token punctuation" >{</span>
    devServer<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
      <span class="token comment" spellcheck="true">// Enable history API fallback so HTML5 History API based</span>
      <span class="token comment" spellcheck="true">// routing works. This is a good default that will come</span>
      <span class="token comment" spellcheck="true">// in handy in more complicated setups.</span>
      historyApiFallback<span class="token punctuation" >:</span> <span class="token boolean" >true</span><span class="token punctuation" >,</span>

      <span class="token comment" spellcheck="true">// Unlike the cli flag, this doesn't set</span>
      <span class="token comment" spellcheck="true">// HotModuleReplacementPlugin!</span>
      hot<span class="token punctuation" >:</span> <span class="token boolean" >true</span><span class="token punctuation" >,</span>

      <span class="token comment" spellcheck="true">// Don't refresh if hot loading fails. If you want</span>
      <span class="token comment" spellcheck="true">// refresh behavior, set inline: true instead.</span>
      hotOnly<span class="token punctuation" >:</span> <span class="token boolean" >true</span><span class="token punctuation" >,</span>

      <span class="token comment" spellcheck="true">// Display only errors to reduce the amount of output.</span>
      stats<span class="token punctuation" >:</span> <span class="token string" >'errors-only'</span><span class="token punctuation" >,</span>

      <span class="token comment" spellcheck="true">// Parse host and port from env to allow customization.</span>
      <span class="token comment" spellcheck="true">//</span>
      <span class="token comment" spellcheck="true">// If you use Vagrant or Cloud9, set</span>
      <span class="token comment" spellcheck="true">// host: options.host || '0.0.0.0';</span>
      <span class="token comment" spellcheck="true">//</span>
      <span class="token comment" spellcheck="true">// 0.0.0.0 is available to all network devices</span>
      <span class="token comment" spellcheck="true">// unlike default `localhost`.</span>
      host<span class="token punctuation" >:</span> options<span class="token punctuation" >.</span>host<span class="token punctuation" >,</span> <span class="token comment" spellcheck="true">// Defaults to `localhost`</span>
      port<span class="token punctuation" >:</span> options<span class="token punctuation" >.</span>port <span class="token comment" spellcheck="true">// Defaults to 8080</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
    plugins<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>
      <span class="token comment" spellcheck="true">// Enable multi-pass compilation for enhanced performance</span>
      <span class="token comment" spellcheck="true">// in larger projects. Good default.</span>
      <span class="token keyword" >new</span> <span class="token class-name" >webpack<span class="token punctuation" >.</span>HotModuleReplacementPlugin</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
        <span class="token comment" spellcheck="true">// Disabled as this won't work with html-webpack-template yet</span>
        <span class="token comment" spellcheck="true">//multiStep: true</span>
      <span class="token punctuation" >}</span><span class="token punctuation" >)</span>
    <span class="token punctuation" >]</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span><span class="token punctuation" >;</span>
</code></pre>
<p>It&#39;s plenty of code, but it&#39;s better to encapsulate it so it contains ideas we understand and want to reuse later on.</p>
<blockquote class="warning"><i class="icon-attention"></i>You should <strong>not</strong> enable HMR for your production configuration. It will likely work, but having the capability enabled there won&#39;t do any good and it will make your bundles bigger than they have to be.</blockquote><h2 class="header"><a class="header-anchor" href="#connecting-with-configuration" id="connecting-with-configuration"></a><span class="text">Connecting with Configuration</span><a class="header-anchor-select" href="#connecting-with-configuration">#</a></h2>
<p>Hooking up this part with our main configuration is simple:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >const</span> path <span class="token operator" >=</span> <span class="token function" >require</span><span class="token punctuation" >(</span><span class="token string" >'path'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token keyword" >const</span> webpack <span class="token operator" >=</span> <span class="token function" >require</span><span class="token punctuation" >(</span><span class="token string" >'webpack'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token keyword" >const</span> HtmlWebpackPlugin <span class="token operator" >=</span> <span class="token function" >require</span><span class="token punctuation" >(</span><span class="token string" >'html-webpack-plugin'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token keyword" >const</span> merge <span class="token operator" >=</span> <span class="token function" >require</span><span class="token punctuation" >(</span><span class="token string" >'webpack-merge'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

<div class="leanpub-insert">
<span class="token keyword" >const</span> parts <span class="token operator" >=</span> <span class="token function" >require</span><span class="token punctuation" >(</span><span class="token string" >'./webpack.parts'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
</div>

<span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>

module<span class="token punctuation" >.</span>exports <span class="token operator" >=</span> <span class="token keyword" >function</span><span class="token punctuation" >(</span>env<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  <span class="token keyword" >return</span> <span class="token function" >merge</span><span class="token punctuation" >(</span>
    common<span class="token punctuation" >,</span>
    <span class="token punctuation" >{</span>
      <span class="token comment" spellcheck="true">// Disable performance hints during development</span>
      performance<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
        hints<span class="token punctuation" >:</span> <span class="token boolean" >false</span>
      <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
      plugins<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>
        <span class="token keyword" >new</span> <span class="token class-name" >webpack<span class="token punctuation" >.</span>NamedModulesPlugin</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span>
      <span class="token punctuation" >]</span>
<div class="leanpub-delete">
    <span class="token punctuation" >}</span>
</div>
<div class="leanpub-insert">
    <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
    parts<span class="token punctuation" >.</span><span class="token function" >devServer</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
      <span class="token comment" spellcheck="true">// Customize host/port here if needed</span>
      host<span class="token punctuation" >:</span> process<span class="token punctuation" >.</span>env<span class="token punctuation" >.</span>HOST<span class="token punctuation" >,</span>
      port<span class="token punctuation" >:</span> process<span class="token punctuation" >.</span>env<span class="token punctuation" >.</span>PORT
    <span class="token punctuation" >}</span><span class="token punctuation" >)</span>
</div>
  <span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span><span class="token punctuation" >;</span>
</code></pre>
<p>Execute <code>npm start</code> and surf to <strong>localhost:8080</strong>. Try modifying <em>app/component.js</em>. Note how it fails to refresh.</p>
<p><img src="/webpack/images/no-refresh.png" alt="No refresh"></p>
<p>We get this behavior because we set <code>hotOnly: true</code> for WDS. Going with <code>inline: true</code> would have swallowed the error and refreshed the page. This behavior is fine, though, as we will implement the HMR interface next to avoid the need for hard refresh.</p>
<blockquote class="warning"><i class="icon-attention"></i><em>webpack-dev-server</em> can be very particular about paths. If the given <code>include</code> paths don&#39;t match the system casing exactly, this can cause it to fail to work. Webpack <a href="https://github.com/webpack/webpack/issues/675">issue #675</a> discusses this in more detail.</blockquote><blockquote class="tip"><i class="icon-attention-circled"></i>You should be able to access the application alternatively through <strong>localhost:8080/webpack-dev-server/</strong> instead of the root. It will provide status information within the browser itself at the top of the application. If your application relies on WebSockets and you use WDS proxying, you&#39;ll need to use this specific url as otherwise WDS own logic will interfere.</blockquote><h2 class="header"><a class="header-anchor" href="#implementing-the-hmr-interface" id="implementing-the-hmr-interface"></a><span class="text">Implementing the HMR Interface</span><a class="header-anchor-select" href="#implementing-the-hmr-interface">#</a></h2>
<p>It is possible to implement the HMR interface through a global known as <code>module.hot</code> exposed by webpack. It provides updates through a function known as <code>module.hot.accept(&lt;path to watch&gt;, &lt;handler&gt;)</code>. It is that handler portion that is interesting as we need to patch the application there. In this case it is enough to replace the old DOM node with a newer one as we receive updates.</p>
<p>The following implementation illustrates the idea:</p>
<p><strong>app/index.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >import</span> component <span class="token keyword" >from</span> <span class="token string" >'./component'</span><span class="token punctuation" >;</span>

<div class="leanpub-delete">
document<span class="token punctuation" >.</span>body<span class="token punctuation" >.</span><span class="token function" >appendChild</span><span class="token punctuation" >(</span><span class="token function" >component</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
</div>
<div class="leanpub-insert">
<span class="token keyword" >let</span> demoComponent <span class="token operator" >=</span> <span class="token function" >component</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

document<span class="token punctuation" >.</span>body<span class="token punctuation" >.</span><span class="token function" >appendChild</span><span class="token punctuation" >(</span>demoComponent<span class="token punctuation" >)</span><span class="token punctuation" >;</span>

<span class="token comment" spellcheck="true">// HMR interface</span>
<span class="token keyword" >if</span><span class="token punctuation" >(</span>module<span class="token punctuation" >.</span>hot<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  <span class="token comment" spellcheck="true">// Capture hot update</span>
  module<span class="token punctuation" >.</span>hot<span class="token punctuation" >.</span><span class="token function" >accept</span><span class="token punctuation" >(</span><span class="token string" >'./component'</span><span class="token punctuation" >,</span> <span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
    <span class="token comment" spellcheck="true">// We have to go through CommonJS here and capture the</span>
    <span class="token comment" spellcheck="true">// default export explicitly!</span>
    <span class="token keyword" >const</span> nextComponent <span class="token operator" >=</span> <span class="token function" >require</span><span class="token punctuation" >(</span><span class="token string" >'./component'</span><span class="token punctuation" >)</span><span class="token punctuation" >.</span><span class="token keyword" >default</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

    <span class="token comment" spellcheck="true">// Replace old content with the hot loaded one</span>
    document<span class="token punctuation" >.</span>body<span class="token punctuation" >.</span><span class="token function" >replaceChild</span><span class="token punctuation" >(</span>nextComponent<span class="token punctuation" >,</span> demoComponent<span class="token punctuation" >)</span><span class="token punctuation" >;</span>

    demoComponent <span class="token operator" >=</span> nextComponent<span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span>
</div>
</code></pre>
<p>If you try to modify <em>app/component.js</em> after this change and change the text to something else, you should notice that the browser does not refresh at all. Instead, it should replace the DOM node while retaining the rest of the application as is. The image below shows possible output.</p>
<p><img src="/webpack/images/hmr.png" alt="Patched a module successfully through HMR"></p>
<p>The idea is the same with styling, React, Redux, and other technologies. They use the same interface internally and often you don&#39;t need to care about the exact implementation. Still, it&#39;s good to know what it&#39;s doing under the hood.</p>
<blockquote class="warning"><i class="icon-attention"></i>If you make a mistake at within your <code>module.hot.accept</code> handler, it will force a refresh by default! This happens because WDS defaults to <code>webpack/hot/dev-server</code>. Follow the setup of the previous chapter and use <code>webpack/hot/only-dev-server</code> instead to avoid this behavior.</blockquote><blockquote class="tip"><i class="icon-attention-circled"></i>Check out the <em>Configuring Hot Module Replacement with React</em> to learn how to get webpack and React work together in a nicer manner.</blockquote><h2 class="header"><a class="header-anchor" href="#hmr-on-windows-ubuntu-and-vagrant" id="hmr-on-windows-ubuntu-and-vagrant"></a><span class="text">HMR on Windows, Ubuntu, and Vagrant</span><a class="header-anchor-select" href="#hmr-on-windows-ubuntu-and-vagrant">#</a></h2>
<p>The setup may be problematic on certain versions of Windows, Ubuntu, and Vagrant. We can solve this through polling:</p>
<p><strong>webpack.parts.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >const</span> webpack <span class="token operator" >=</span> <span class="token function" >require</span><span class="token punctuation" >(</span><span class="token string" >'webpack'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

exports<span class="token punctuation" >.</span>devServer <span class="token operator" >=</span> <span class="token keyword" >function</span><span class="token punctuation" >(</span>options<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  <span class="token keyword" >return</span> <span class="token punctuation" >{</span>
    devServer<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
<div class="leanpub-insert">
      watchOptions<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
        <span class="token comment" spellcheck="true">// Delay the rebuild after the first change</span>
        aggregateTimeout<span class="token punctuation" >:</span> <span class="token number" >300</span><span class="token punctuation" >,</span>
        <span class="token comment" spellcheck="true">// Poll using interval (in ms, accepts boolean too)</span>
        poll<span class="token punctuation" >:</span> <span class="token number" >1000</span>
      <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
</div>
      <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
    plugins<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>
<div class="leanpub-insert">
      <span class="token comment" spellcheck="true">// ignore node_modules so CPU usage with poll watching drops significantly</span>
      <span class="token keyword" >new</span> <span class="token class-name" >webpack<span class="token punctuation" >.</span>WatchIgnorePlugin</span><span class="token punctuation" >(</span><span class="token punctuation" >[</span>
        path<span class="token punctuation" >.</span><span class="token function" >join</span><span class="token punctuation" >(</span>__dirname<span class="token punctuation" >,</span> <span class="token string" >'node_modules'</span><span class="token punctuation" >)</span>
      <span class="token punctuation" >]</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
</div>
      <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
    <span class="token punctuation" >]</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span>
</code></pre>
<p>Given this setup polls the file system, it is going to be more resource intensive. It&#39;s worth giving a go if the default doesn&#39;t work, though.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i>There are more details in <em>webpack-dev-server</em> issue <a href="https://github.com/webpack/webpack-dev-server/issues/155">#155</a>.</blockquote><h2 class="header"><a class="header-anchor" href="#setting-wds-entry-points-manually" id="setting-wds-entry-points-manually"></a><span class="text">Setting WDS Entry Points Manually</span><a class="header-anchor-select" href="#setting-wds-entry-points-manually">#</a></h2>
<p>In the setup above, the WDS related entries were injected automatically. Assuming you are using WDS through Node.js, you would have to set them yourself as the Node.js API doesn&#39;t support injecting. The example below illustrates how you might achieve this:</p>
<pre><code class="lang-javascript">entry<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
  hmr<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>
    <span class="token comment" spellcheck="true">// Include the client code.</span>
    <span class="token comment" spellcheck="true">// Note how the host/port setting maps here.</span>
    <span class="token string" >'webpack-dev-server/client?http://localhost:8080'</span><span class="token punctuation" >,</span>

    <span class="token comment" spellcheck="true">// Hot reload only when compiled successfully</span>
    <span class="token string" >'webpack/hot/only-dev-server'</span>

    <span class="token comment" spellcheck="true">// Alternative with refresh on failure</span>
    <span class="token comment" spellcheck="true">// 'webpack/hot/dev-server'</span>
  <span class="token punctuation" >]</span><span class="token punctuation" >,</span>
  <span class="token comment" spellcheck="true">// Rest of the entries</span>
  <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
<span class="token punctuation" >}</span>
</code></pre>
<h2 class="header"><a class="header-anchor" href="#conclusion" id="conclusion"></a><span class="text">Conclusion</span><a class="header-anchor-select" href="#conclusion">#</a></h2>
<p>HMR is one of those aspects of webpack that makes it interesting for developers. Even though other tools have similar functionality, webpack has taken its implementation quite far. To get most out of it, you will have to implement the HMR interface or use solutions that implement it.</p>
</div><div class="social-links"><blockquote class="tip">If you enjoyed this chapter, consider subscribing to the mailing list below or following <a href="https://twitter.com/survivejs">@survivejs</a> for occasional updates. There is also <a href="/atom.xml">RSS</a> available for old beards (no pun intended).</blockquote><h2 class="subscribe-header">Subscribe to the mailing list</h2><form action="//jster.us7.list-manage.com/subscribe/post?u=ed40c0084a0c5ba31b3365d65&amp;id=b853b8e786" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate social-form" target="_blank" novalidate=""><div id="mc_embed_signup_scroll"><div class="mc-field-group social-input-container"><input type="email" placeholder="Email" value="" name="EMAIL" class="required email" id="mce-EMAIL"/></div><div style="display:none;position:absolute;left:-5000px;"><input type="text" name="b_ed40c0084a0c5ba31b3365d65_b853b8e786" tabindex="-1" value=""/></div><div class="social-subscribe-container"><input type="submit" class="btn button social-subscribe" style="margin-top:1em;margin-bottom:1em;line-height:2em;" value="Subscribe" name="subscribe" id="mc-embedded-subscribe"/></div></div></form></div><div class="new-prevnext"><div class="new-prevnext__prev"><div class="new-prevnext__bg" style="background-image:url(/assets/img/chapters/splash.jpg);"></div><span class="new-prevnext__info">Previous chapter</span><a class="new-prevnext__link" href="/webpack/developing-with-webpack/automatic-browser-refresh">Automatic Browser Refresh</a></div><div class="new-prevnext__next"><div class="new-prevnext__bg" style="background-image:url(/assets/img/chapters/lint.jpg);"></div><span class="new-prevnext__info">Next chapter</span><a class="new-prevnext__link" href="/webpack/developing-with-webpack/linting">Linting JavaScript</a></div></div><blockquote class="tip"><p>This book is <a href="https://leanpub.com/survivejs-webpack">available through Leanpub</a>. By purchasing the book you support the development of further content. A part of profit (~30%) goes to Tobias Koppers, the author of Webpack.</p></blockquote><div id="disqus_thread"></div></div></div><div><a class="next-page" title="Linting JavaScript" href="/webpack/developing-with-webpack/linting"><i class="icon-right-open"></i></a><a class="previous-page" title="Automatic Browser Refresh" href="/webpack/developing-with-webpack/automatic-browser-refresh"><i class="icon-left-open"></i></a></div><script type="text/javascript">var disqus_shortname = 'survivejs';(function() {var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script></div><div class="nav__wrapper"><input type="checkbox" class="nav__toggle" id="nav__toggle"/><label class="nav__toggle-label" for="nav__toggle"></label><nav class="nav"><div class="nav__link"><a class="" href="/">Home</a></div><div class="nav__link"><a class="" href="/blog">Read the blog</a></div><div class="nav__link"><a class="" href="https://leanpub.com/survivejs-webpack">Buy the ebook</a></div><div class="nav__link"><a class="" href=""></a></div><div class="nav__link"><a class="" href="https://twitter.com/survivejs">@survivejs</a></div></nav></div><a href="https://github.com/survivejs/webpack" class="github-corner"><svg width="80" height="80" viewBox="0 0 250 250" style="position:absolute;top:0;fill:#000;right:0;"><path class="octo-banner" d="M0 0l115 115h15l12 27 108 108V0z" fill="#fff"></path><path class="octo-arm" d="M128 109c-15-9-9-19-9-19 3-7 2-11 2-11-1-7 3-2 3-2 4 5 2 11 2 11-3 10 5 15 9 16" style="-webkit-transform-origin:130px 106px;transform-origin:130px 106px;"></path><path class="octo-body" d="M115 115s4 2 5 0l14-14c3-2 6-3 8-3-8-11-15-24 2-41 5-5 10-7 16-7 1-2 3-7 12-11 0 0 5 3 7 16 4 2 8 5 12 9s7 8 9 12c14 3 17 7 17 7-4 8-9 11-11 11 0 6-2 11-7 16-16 16-30 10-41 2 0 3-1 7-5 11l-12 11c-1 1 1 5 1 5z"></path></svg></a><footer><div class="footer-wrapper"><div class="footer-content-wrapper"><div class="footer-social"><h3>Social</h3><ul><li><a href="https://twitter.com/survivejs" target="_blank">@survivejs</a></li><li><a href="http://eepurl.com/bth1v5" target="_blank">Mailing List</a></li><li><a href="https://gitter.im/survivejs" target="_blank">Gitter Chat</a></li><li><a href="https://github.com/survivejs" target="_blank">GitHub</a></li><li><a href="/atom.xml" target="_blank">Blog RSS</a></li><li><a href="http://goo.gl/forms/OWdGIOdHm9" target="_blank">Contact</a></li><li><a href="https://github.com/survivejs/ama/issues" target="_blank">Ask Me Anything</a></li></ul></div><div class="footer-blog"><h3>From the Blog</h3><ul class="blog-teasers"><li><a class="blog-teaser" href="/blog/survivejs-webpack-150">SurviveJS - Webpack - v1.5.0</a></li><li><a class="blog-teaser" href="/blog/styletron-interview">Styletron - Universal, high-performance JavaScript styles - Interview with Ryan Tsao</a></li><li><a class="blog-teaser" href="/blog/survivejs-webpack-142">SurviveJS - Webpack - v1.4.2</a></li><li><a class="blog-teaser" href="/blog/inferno-interview">Inferno - Blazing fast, React-like UI library - Interview with Dominic Gannaway</a></li><li><a class="blog-teaser" href="/blog/svelte-interview">Svelte - The magical disappearing UI framework - Interview with Rich Harris</a></li><li><a class="blog-teaser" href="/blog/webpack-merge-interview">webpack-merge - Taming Webpack Configuration - Interview with Juho Vepsäläinen</a></li><li><a class="blog-teaser" href="/blog/starratio-interview">StarRatio - Compare JavaScript Projects - Interview with Dmitry Zaets</a></li><li><a class="blog-teaser" href="/blog/redom-interview">RE:DOM - Tiny but Super Fast DOM Library - Interview with Juha Lindstedt</a></li><li><a class="blog-teaser" href="/blog/glamor-interview">Glamor - Inline CSS for React et al - Interview with Sunil Pai</a></li><li><a class="blog-teaser" href="/blog/teaching-javascript-interview">Teaching JavaScript - Interview with Bianca Gandolfo</a></li></ul></div></div></div></footer><div><div class="gitter-open-chat-button">Need help?</div><script type="text/javascript">
            ((window.gitter = {}).chat = {}).options = {
              showChatByDefault: false,
              activationElement: '.gitter-open-chat-button',
              room: 'survivejs/webpack'
            };
          </script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async="" defer=""></script></div><div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script type="text/javascript">
            docsearch({
              apiKey: '1182e3806d62e921613b8dc9c7a22ef3',
              indexName: 'survivejs_webpack',
              inputSelector: '#search',
              debug: false
            });
          </script></div></main></body></html>