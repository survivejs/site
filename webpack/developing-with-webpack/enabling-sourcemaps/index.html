<html lang="en"><head><title>SurviveJS - Enabling Sourcemaps</title><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimal-ui"/><meta name="description" content="
To improve the debuggability of the application, we can set up sourcemaps. They allow you to see exactly where an error was raised. In Webpack this is controlled through the devtool setting. Webpack can generate both inline sourcemaps included to within bundles or separate sourcemap files. Former i…"/><meta name="keywords" content="webpack,react,javascript,programming,web development"/><link rel="icon" type="image/png" href="/assets/img/favicon.png"/><link rel="alternate" type="application/atom+xml" href="./atom.xml"/><link rel="stylesheet" href="/assets/main.css"/></head><body><main role="main"><div class="chapter__wrapper"><div class="header-image" style="background-image:url(/assets/img/chapters/wheels.jpg);"></div><h1 class="post__heading">Enabling Sourcemaps</h1><div class="header-extra"><a href="https://pixabay.com/en/wheels-machine-installation-art-784865/">Efraimstochter (Public Domain)</a></div><div class="toc-nav__wrapper"><h4 class="toc-nav--header">Table of Contents</h4><ul class="toc-nav"><li class="toc-intro"><a class="toc-nav__link intro" href="/webpack/introduction">Introduction</a></li><li class="toc-intro"><a class="toc-nav__link intro" href="/webpack/webpack-compared">Webpack Compared</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/developing-with-webpack">Developing with Webpack</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/developing-with-webpack/getting-started">Getting Started</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/developing-with-webpack/splitting-configuration">Splitting the Configuration</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/developing-with-webpack/automatic-browser-refresh">Automatic Browser Refresh</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/developing-with-webpack/refreshing-css">Refreshing CSS</a></li><li class="toc-chapter"><span class="toc-nav__link toc-nav__link--current chapter">Enabling Sourcemaps</span></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/building-with-webpack">Building with Webpack</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building-with-webpack/minifying-build">Minifying the Build</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building-with-webpack/setting-environment-variables">Setting Environment Variables</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building-with-webpack/splitting-bundles">Splitting Bundles</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building-with-webpack/adding-hashes-to-filenames">Adding Hashes to Filenames</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building-with-webpack/cleaning-build">Cleaning the Build</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building-with-webpack/separating-css">Separating CSS</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building-with-webpack/analyzing-build-statistics">Analyzing Build Statistics</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building-with-webpack/hosting-on-github-pages">Hosting on GitHub Pages</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/loading-assets">Loading Assets</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/loading-assets/formats-supported">Formats Supported</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/loading-assets/loader-definitions">Loader Definitions</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/loading-assets/loading-styles">Loading Styles</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/loading-assets/loading-images">Loading Images</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/loading-assets/loading-fonts">Loading Fonts</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/advanced-techniques">Advanced Techniques</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/advanced-techniques/understanding-chunks">Understanding Chunks</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/advanced-techniques/authoring-packages">Authoring Packages</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/advanced-techniques/writing-loaders">Writing Loaders</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/advanced-techniques/configuring-react">Configuring React</a></li></ul><div class="buy-container"><img class="sidebar-cover" src="/assets/img/webpack_title_page_small.png" width="255" height="329"/><p><a class="btn btn--normal btn--buy" href="https://leanpub.com/survivejs-webpack">Buy at Leanpub</a></p></div></div><div class="chapter"><div class="post__content"><blockquote class="latestpost tip"><div>From the blog:</div><a class="latestpost-link" href="/blog/survivejs-webpack-110">SurviveJS - Webpack - v1.1.0</a></blockquote><div class="chapter-content"><p>To improve the debuggability of the application, we can set up sourcemaps. They allow you to see exactly where an error was raised. In Webpack this is controlled through the <code>devtool</code> setting. Webpack can generate both inline sourcemaps included to within bundles or separate sourcemap files. Former is useful during development due to better performance while latter is handy for production usage.</p>
<h2 class="header"><a class="header-anchor" href="#enabling-sourcemaps-during-development" id="enabling-sourcemaps-during-development"></a><span class="text">Enabling Sourcemaps during Development</span><a class="header-anchor-select" href="#enabling-sourcemaps-during-development">#</a></h2>
<p>To enable sourcemaps during development, we can use a decent default known as <code>eval-source-map</code> like this:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript"><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>

<span class="token keyword" >switch</span><span class="token punctuation" >(</span>process<span class="token punctuation" >.</span>env<span class="token punctuation" >.</span>npm_lifecycle_event<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  <span class="token keyword" >case</span> <span class="token string" >'build'</span><span class="token punctuation" >:</span>
    config <span class="token operator" >=</span> <span class="token function" >merge</span><span class="token punctuation" >(</span>common<span class="token punctuation" >,</span> <span class="token punctuation" >{</span><span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token keyword" >default</span><span class="token punctuation" >:</span>
    config <span class="token operator" >=</span> <span class="token function" >merge</span><span class="token punctuation" >(</span>
      common<span class="token punctuation" >,</span>
<div class="leanpub-insert">
      <span class="token punctuation" >{</span>
        devtool<span class="token punctuation" >:</span> <span class="token string" >'eval-source-map'</span>
      <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
</div>
      parts<span class="token punctuation" >.</span><span class="token function" >setupCSS</span><span class="token punctuation" >(</span>PATHS<span class="token punctuation" >.</span>app<span class="token punctuation" >)</span><span class="token punctuation" >,</span>
      <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
    <span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span>

module<span class="token punctuation" >.</span>exports <span class="token operator" >=</span> <span class="token function" >validate</span><span class="token punctuation" >(</span>config<span class="token punctuation" >)</span><span class="token punctuation" >;</span>
</code></pre>
<p><code>eval-source-map</code> builds slowly initially, but it provides fast rebuild speed and yields real files. Faster development specific options, such as <code>cheap-module-eval-source-map</code> and <code>eval</code>, produce lower quality sourcemaps. All <code>eval</code> options will emit sourcemaps as a part of your JavaScript code.</p>
<p>It is possible you may need to enable sourcemaps in your browser for this to work. See <a href="https://developer.chrome.com/devtools/docs/javascript-debugging">Chrome</a> and <a href="https://developer.mozilla.org/en-US/docs/Tools/Debugger/How_to/Use_a_source_map">Firefox</a> instructions for further details.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i><a href="https://webpack.github.io/docs/configuration.html#devtool">The official documentation</a> covers sourcemap options in greater detail.</blockquote><h2 class="header"><a class="header-anchor" href="#sourcemap-types-supported-by-webpack" id="sourcemap-types-supported-by-webpack"></a><span class="text">Sourcemap Types Supported by Webpack</span><a class="header-anchor-select" href="#sourcemap-types-supported-by-webpack">#</a></h2>
<p>Even though a sourcemap type, such as <code>eval-source-map</code> or <code>eval</code>, can be enough during development, Webpack provides other types too. Given these will be generated within your bundles, they won&#39;t be useful during production.</p>
<p>The following table adapted from the <a href="https://webpack.github.io/docs/configuration.html#devtool">documentation</a> contains the supported types arranged based on speed. The lower the quality, the higher build and rebuild speeds are possible.</p>
<table>
<thead>
<tr>
<th>Sourcemap type</th>
<th>Quality</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>eval</code></td>
<td>Generated code</td>
<td>Each module is executed with <code>eval</code> and <code>//@ sourceURL</code>.</td>
</tr>
<tr>
<td><code>cheap-eval-source-map</code></td>
<td>Transformed code (lines only)</td>
<td>Each module is executed with <code>eval</code> and a sourcemap is added as a dataurl to the <code>eval</code>.</td>
</tr>
<tr>
<td><code>cheap-module-eval-source-map</code></td>
<td>Original source (lines only)</td>
<td>Same idea, but higher quality with lower performance.</td>
</tr>
<tr>
<td><code>eval-source-map</code></td>
<td>Original source</td>
<td>Same idea, but highest quality and lowest performance.</td>
</tr>
</tbody>
</table>
<p>You can start from <code>eval-source-map</code> and move to other options as it starts to feel too slow.</p>
<p>Webpack can also generate production usage friendly sourcemaps. These will end up in separate files and will be loaded by the browser only when required. This way your users get good performance while it&#39;s easier for you to debug the application. I&#39;ve listed them in a similar way below.</p>
<table>
<thead>
<tr>
<th>Sourcemap type</th>
<th>Quality</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>cheap-source-map</code></td>
<td>Transformed code (lines only)</td>
<td>Generated sourcemaps don&#39;t have column mappings. Sourcemaps from loaders are not used.</td>
</tr>
<tr>
<td><code>cheap-module-source-map</code></td>
<td>Original source (lines only)</td>
<td>Same except sourcemaps from loaders are simplified to a single mapping per line.</td>
</tr>
<tr>
<td><code>source-map</code></td>
<td>Original source</td>
<td>The best quality with the most complete result, but also the slowest.</td>
</tr>
</tbody>
</table>
<p><code>source-map</code> is a good default here. Even though it will take longer to generate the sourcemaps this way, you will get the best quality. If you don&#39;t care about production sourcemaps, you can simply skip the setting there and get better performance in return.</p>
<p>There are a couple of other options that affect sourcemap generation:</p>
<ul>
<li><code>output.sourceMapFilename</code> - This option allows you to modify the name of the generated sourcemap file. It defaults to <code>[file].map</code> and supports <code>[file]</code>, <code>[id]</code>, and <code>[hash]</code> replacements. The default is often all you need.</li>
<li><code>output.devtoolModuleFilenameTemplate</code>. - In case you want to modify sourcemap outlook, this is the option. It&#39;s behavior depends on the <code>devtool</code> chosen. The <a href="https://webpack.github.io/docs/configuration.html#output-sourcemapfilename">official documentation</a> digs into the specifics.</li>
</ul>
<h2 class="header"><a class="header-anchor" href="#-sourcemapdevtoolplugin-" id="-sourcemapdevtoolplugin-"></a><span class="text"><code>SourceMapDevToolPlugin</code></span><a class="header-anchor-select" href="#-sourcemapdevtoolplugin-">#</a></h2>
<p>If you want more control over sourcemap generation, it is possible to use the plugin instead. This way you can generate sourcemaps only for the portions of the code you want while having strict control over the result. In case you use the plugin, you can skip <code>devtool</code> option altogether.</p>
<p>Here&#39;s what it looks like in its entirety (adapted from <a href="https://webpack.github.io/docs/list-of-plugins.html#sourcemapdevtoolplugin">the official documentation</a>):</p>
<pre><code class="lang-javascript"><span class="token keyword" >new</span> <span class="token class-name" >webpack<span class="token punctuation" >.</span>SourceMapDevToolPlugin</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
  <span class="token comment" spellcheck="true">// Match assets just like for loaders.</span>
  test<span class="token punctuation" >:</span> string <span class="token operator" >|</span> RegExp <span class="token operator" >|</span> Array<span class="token punctuation" >,</span>
  include<span class="token punctuation" >:</span> string <span class="token operator" >|</span> RegExp <span class="token operator" >|</span> Array<span class="token punctuation" >,</span>
  exclude<span class="token punctuation" >:</span> string <span class="token operator" >|</span> RegExp <span class="token operator" >|</span> Array<span class="token punctuation" >,</span>

  <span class="token comment" spellcheck="true">// If filename is set, output to this file.</span>
  <span class="token comment" spellcheck="true">// See `sourceMapFileName`.</span>
  filename<span class="token punctuation" >:</span> string<span class="token punctuation" >,</span>

  <span class="token comment" spellcheck="true">// This line is appended to the original asset processed. For</span>
  <span class="token comment" spellcheck="true">// instance '[url]' would get replaced with an url to the</span>
  <span class="token comment" spellcheck="true">// sourcemap.</span>
  append<span class="token punctuation" >:</span> <span class="token boolean" >false</span> <span class="token operator" >|</span> string<span class="token punctuation" >,</span>

  <span class="token comment" spellcheck="true">// See `devtoolModuleFilenameTemplate` for specifics.</span>
  moduleFilenameTemplate<span class="token punctuation" >:</span> string<span class="token punctuation" >,</span>
  fallbackModuleFilenameTemplate<span class="token punctuation" >:</span> string<span class="token punctuation" >,</span>

  module<span class="token punctuation" >:</span> bool<span class="token punctuation" >,</span> <span class="token comment" spellcheck="true">// If false, separate sourcemaps aren't generated.</span>
  columns<span class="token punctuation" >:</span> bool<span class="token punctuation" >,</span> <span class="token comment" spellcheck="true">// If false, column mappings are ignored.</span>

  <span class="token comment" spellcheck="true">// Use simpler line to line mappings for the matched modules.</span>
  lineToLine<span class="token punctuation" >:</span> bool <span class="token operator" >|</span> <span class="token punctuation" >{</span>test<span class="token punctuation" >,</span> include<span class="token punctuation" >,</span> exclude<span class="token punctuation" >}</span>
<span class="token punctuation" >}</span><span class="token punctuation" >)</span>
</code></pre>
<h2 class="header"><a class="header-anchor" href="#conclusion" id="conclusion"></a><span class="text">Conclusion</span><a class="header-anchor-select" href="#conclusion">#</a></h2>
<p>Sourcemaps can be convenient during development. They provide us better means to debug our applications as we can still examine the original code over generated one. They can be useful even for production usage and allow you to debug issues while serving a client friendly version of your application.</p>
<p>Our build configuration isn&#39;t that sophisticated yet, though. I&#39;ll show you how to push it further in the next part as we discuss various build related techniques.</p>
</div><div class="social-links"><blockquote class="tip">If you enjoyed this chapter, consider subscribing to the mailing list below or following <a href="https://twitter.com/survivejs">@survivejs</a> for occasional updates. There is also <a href="/atom.xml">RSS</a> available for old beards (no pun intended).</blockquote><h2 class="subscribe-header">Subscribe to the mailing list</h2><form action="//jster.us7.list-manage.com/subscribe/post?u=ed40c0084a0c5ba31b3365d65&amp;id=b853b8e786" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate social-form" target="_blank" novalidate=""><div id="mc_embed_signup_scroll"><div class="mc-field-group social-input-container"><input type="email" placeholder="Email" value="" name="EMAIL" class="required email" id="mce-EMAIL"/></div><div style="display:none;position:absolute;left:-5000px;"><input type="text" name="b_ed40c0084a0c5ba31b3365d65_b853b8e786" tabindex="-1" value=""/></div><div class="social-subscribe-container"><input type="submit" class="btn button social-subscribe" style="margin-top:1em;margin-bottom:1em;line-height:2em;" value="Subscribe" name="subscribe" id="mc-embedded-subscribe"/></div></div></form></div><div class="new-prevnext"><div class="new-prevnext__prev"><div class="new-prevnext__bg" style="background-image:url(/assets/img/chapters/refresh.jpg);"></div><span class="new-prevnext__info">Previous chapter</span><a class="new-prevnext__link" href="/webpack/developing-with-webpack/refreshing-css">Refreshing CSS</a></div><div class="new-prevnext__next"><div class="new-prevnext__bg" style="background-image:url(/assets/img/chapters/machine.jpg);"></div><span class="new-prevnext__info">Next chapter</span><a class="new-prevnext__link" href="/webpack/building-with-webpack">Building with Webpack</a></div></div><blockquote class="tip"><p>This book is <a href="https://leanpub.com/survivejs-webpack">available through Leanpub</a>. By purchasing the book you support the development of further content. A part of profit (~30%) goes to Tobias Koppers, the author of Webpack.</p></blockquote><div id="disqus_thread"></div></div></div><div><a class="next-page" title="Building with Webpack" href="/webpack/building-with-webpack"><i class="icon-right-open"></i></a><a class="previous-page" title="Refreshing CSS" href="/webpack/developing-with-webpack/refreshing-css"><i class="icon-left-open"></i></a></div><script type="text/javascript">var disqus_shortname = 'survivejs';(function() {var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script></div><div class="nav__wrapper"><input type="checkbox" class="nav__toggle" id="nav__toggle"/><label class="nav__toggle-label" for="nav__toggle"></label><nav class="nav"><div class="nav__link"><a class="" href="/">Home</a></div><div class="nav__link"><a class="" href="/blog">Read the blog</a></div><div class="nav__link"><a class="" href="https://leanpub.com/survivejs-webpack">Buy the full ebook</a></div><div class="nav__link"><a class="" href=""></a></div><div class="nav__link"><a class="" href="https://twitter.com/survivejs">@survivejs</a></div></nav></div><div class="right ribbon github-fork-ribbon-wrapper"><div class="github-fork-ribbon" style="background-color:black;"><a href="https://github.com/survivejs/webpack/issues/new?title=Enabling Sourcemaps - " target="_blank">Submit feedback</a></div></div><footer><div class="footer-wrapper"><div class="footer-content-wrapper"><div class="footer-social"><h3>Social</h3><ul><li><a href="https://twitter.com/survivejs" target="_blank">@survivejs</a></li><li><a href="http://eepurl.com/bth1v5" target="_blank">Mailing List</a></li><li><a href="https://gitter.im/survivejs/webpack_react" target="_blank">Gitter Chat</a></li><li><a href="https://github.com/survivejs/webpack_react" target="_blank">GitHub</a></li><li><a href="/atom.xml" target="_blank">Blog RSS</a></li><li><a href="http://goo.gl/forms/OWdGIOdHm9" target="_blank">Contact</a></li><li><a href="https://github.com/survivejs/ama/issues" target="_blank">Ask Me Anything</a></li></ul></div><div class="footer-blog"><h3>From the Blog</h3><ul class="blog-teasers"><li><a class="blog-teaser" href="/blog/survivejs-webpack-110">SurviveJS - Webpack - v1.1.0</a></li><li><a class="blog-teaser" href="/blog/frzr-interview">FRZR - a Tiny View Library - Interview with Juha Lindstedt</a></li><li><a class="blog-teaser" href="/blog/survivejs210">SurviveJS - Webpack and React - v2.1.0</a></li><li><a class="blog-teaser" href="/blog/relax-interview">Relax - New generation CMS on top of React and Node.js - Interview with Bruno Mota</a></li><li><a class="blog-teaser" href="/blog/survivejs-webpack-100">SurviveJS - Webpack - v1.0.0</a></li><li><a class="blog-teaser" href="/blog/react-rocks-interview">React.rocks - React Components and Demos - Interview with Jeff Winkler</a></li><li><a class="blog-teaser" href="/blog/reindex-interview">Reindex - Instant GraphQL Backend for Your React Apps - Interview with Ville Immonen</a></li><li><a class="blog-teaser" href="/blog/survivejs-interview">SurviveJS - Learn Webpack and React - Interview with Juho Vepsäläinen</a></li><li><a class="blog-teaser" href="/blog/styleguidist-interview">react-styleguidist - Style guide generator for React - Interview with Artem Sapegin</a></li><li><a class="blog-teaser" href="/blog/survivejs200">SurviveJS - Webpack and React - v2.0.0</a></li></ul></div></div></div></footer><div><div class="gitter-open-chat-button">Need help?</div><script type="text/javascript">
            ((window.gitter = {}).chat = {}).options = {
              showChatByDefault: false,
              activationElement: '.gitter-open-chat-button',
              room: 'survivejs/webpack_react'
            };
          </script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async="" defer=""></script></div></main></body></html>